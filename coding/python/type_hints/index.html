<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="My personal digital garden"><meta name=author content=Lyz><link href=https://lyz-code.github.io/blue-book/coding/python/type_hints/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-8.1.3"><title>Type hints - The Blue Book</title><link rel=stylesheet href=../../../assets/stylesheets/main.edf004c2.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.e6a45f82.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../css/timeago.css><link rel=stylesheet href=../../../stylesheets/extra.css><link rel=stylesheet href=../../../stylesheets/links.css><script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=light-blue> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#advantages-and-disadvantages class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> For updates subscribe to the <a href=https://lyz-code.github.io/blue-book/newsletter/0_newsletter_index/ ><strong>RSS feed</strong></a> <img src=/blue-book/img/orange_logo.png height=15 width=15> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="The Blue Book" class="md-header__button md-logo" aria-label="The Blue Book" data-md-component=logo> <img src=../../../img/logo.bmp alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> The Blue Book </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Type hints </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=light-blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=blue-grey data-md-color-accent=light-blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/lyz-code/blue-book/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> lyz-code/blue-book </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="The Blue Book" class="md-nav__button md-logo" aria-label="The Blue Book" data-md-component=logo> <img src=../../../img/logo.bmp alt=logo> </a> The Blue Book </label> <div class=md-nav__source> <a href=https://github.com/lyz-code/blue-book/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> lyz-code/blue-book </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../projects/projects/ class=md-nav__link> Projects </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Activism <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Activism data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Activism </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_1 type=checkbox id=__nav_3_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../antifascism/ >Antifascism</a> </div> <nav class=md-nav aria-label=Antifascism data-md-level=2> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Antifascism </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../antitransphobia/ class=md-nav__link> Anti-Transphobia </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../diversity/ >Diversity, Equity and Inclusion</a> </div> <nav class=md-nav aria-label="Diversity, Equity and Inclusion" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Diversity, Equity and Inclusion </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Feminism <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Feminism data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Feminism </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../feminism/privileges/ class=md-nav__link> Privileges </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../free_knowledge/ class=md-nav__link> Free Knowledge </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../life_management/ >Life Management</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Life Management" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Life Management </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Health <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Health data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Health </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../sleep/ class=md-nav__link> Sleep </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../teeth/ >Teeth</a> </div> <nav class=md-nav aria-label=Teeth data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Teeth </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../remote_work/ class=md-nav__link> Remote Working </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_4 type=checkbox id=__nav_5_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../fitness_band/ >Fitness Tracker</a> </div> <nav class=md-nav aria-label="Fitness Tracker" data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Fitness Tracker </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6> Coding <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Coding data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Coding </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_1 type=checkbox id=__nav_6_1> <label class=md-nav__link for=__nav_6_1> Generic Coding Practices <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Generic Coding Practices" data-md-level=2> <label class=md-nav__title for=__nav_6_1> <span class="md-nav__icon md-icon"></span> Generic Coding Practices </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_1_1 type=checkbox id=__nav_6_1_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../versioning/ >Program Versioning</a> <label for=__nav_6_1_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Program Versioning" data-md-level=3> <label class=md-nav__title for=__nav_6_1_1> <span class="md-nav__icon md-icon"></span> Program Versioning </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../changelog/ class=md-nav__link> Keep a Changelog </a> </li> <li class=md-nav__item> <a href=../../../documentation/ class=md-nav__link> Writing good documentation </a> </li> <li class=md-nav__item> <a href=../../tdd/ class=md-nav__link> TDD </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_2 type=checkbox id=__nav_6_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../../python/ >Python</a> <label for=__nav_6_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Python data-md-level=2> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../json/json/ class=md-nav__link> JSON </a> </li> <li class=md-nav__item> <a href=../../sql/sql/ class=md-nav__link> SQL </a> </li> <li class=md-nav__item> <a href=../../../sqlite/ class=md-nav__link> SQLite </a> </li> <li class=md-nav__item> <a href=../../yaml/yaml/ class=md-nav__link> YAML </a> </li> <li class=md-nav__item> <a href=../../promql/promql/ class=md-nav__link> Promql </a> </li> <li class=md-nav__item> <a href=../../../vuejs/ class=md-nav__link> Vue.js </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_9 type=checkbox id=__nav_6_9> <div class="md-nav__link md-nav__link--index "> <a href=../../javascript/javascript/ >Javascript</a> </div> <nav class=md-nav aria-label=Javascript data-md-level=2> <label class=md-nav__title for=__nav_6_9> <span class="md-nav__icon md-icon"></span> Javascript </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../react/react/ class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../../issues/ class=md-nav__link> Issues </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <div class="md-nav__link md-nav__link--index "> <a href=../../../devops/devops/ >DevOps</a> <label for=__nav_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=DevOps data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> DevOps </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Software Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Software Architecture" data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Software Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../architecture/solid/ class=md-nav__link> SOLID </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_2 type=checkbox id=__nav_8_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../architecture/domain_driven_design/ >Domain Driven Design</a> <label for=__nav_8_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Domain Driven Design" data-md-level=2> <label class=md-nav__title for=__nav_8_2> <span class="md-nav__icon md-icon"></span> Domain Driven Design </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../adr/ class=md-nav__link> Architecture Decision Record </a> </li> <li class=md-nav__item> <a href=../../../architecture/database_architecture/ class=md-nav__link> Database Architecture </a> </li> <li class=md-nav__item> <a href=../../../architecture/orm_builder_query_or_raw_sql/ class=md-nav__link> ORM, Query Builder or Raw SQL </a> </li> <li class=md-nav__item> <a href=../../../architecture/microservices/ class=md-nav__link> Microservices </a> </li> <li class=md-nav__item> <a href=../../../architecture/restful_apis/ class=md-nav__link> Restful APIS </a> </li> <li class=md-nav__item> <a href=../../../architecture/redis/ class=md-nav__link> Redis </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_9 type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9> Data Analysis <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Data Analysis" data-md-level=1> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Data Analysis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../data_analysis/recommender_systems/recommender_systems/ class=md-nav__link> Recommender Systems </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10 type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10> Operative Systems <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Operative Systems" data-md-level=1> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Operative Systems </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10_1 type=checkbox id=__nav_10_1> <label class=md-nav__link for=__nav_10_1> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=2> <label class=md-nav__title for=__nav_10_1> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux_snippets/ class=md-nav__link> Linux Snippets </a> </li> <li class=md-nav__item> <a href=../../../afew/ class=md-nav__link> afew </a> </li> <li class=md-nav__item> <a href=../../../alot/ class=md-nav__link> alot </a> </li> <li class=md-nav__item> <a href=../../../activitywatch/ class=md-nav__link> ActivityWatch </a> </li> <li class=md-nav__item> <a href=../../../beancount/ class=md-nav__link> beancount </a> </li> <li class=md-nav__item> <a href=../../../beets/ class=md-nav__link> Beets </a> </li> <li class=md-nav__item> <a href=../../../linux/brew/ class=md-nav__link> brew </a> </li> <li class=md-nav__item> <a href=../../../docker/ class=md-nav__link> Docker </a> </li> <li class=md-nav__item> <a href=../../../dunst/ class=md-nav__link> dunst </a> </li> <li class=md-nav__item> <a href=../../../self_hosted/dynamicdns/ class=md-nav__link> Dynamic DNS </a> </li> <li class=md-nav__item> <a href=../../../linux/elasticsearch/ class=md-nav__link> elasticsearch </a> </li> <li class=md-nav__item> <a href=../../../linux/fail2ban/ class=md-nav__link> fail2ban </a> </li> <li class=md-nav__item> <a href=../../../gajim/ class=md-nav__link> Gajim </a> </li> <li class=md-nav__item> <a href=../../../gh/ class=md-nav__link> Github cli </a> </li> <li class=md-nav__item> <a href=../../../linux/google_chrome/ class=md-nav__link> google chrome </a> </li> <li class=md-nav__item> <a href=../../../graylog/ class=md-nav__link> Graylog </a> </li> <li class=md-nav__item> <a href=../../../linux/haproxy/ class=md-nav__link> HAProxy </a> </li> <li class=md-nav__item> <a href=../../../docs/linux/hard_drive_health.md class=md-nav__link> Hard drive health </a> </li> <li class=md-nav__item> <a href=../../../husboard/ class=md-nav__link> Hushboard </a> </li> <li class=md-nav__item> <a href=../../../linux/hypothesis/ class=md-nav__link> hypothesis </a> </li> <li class=md-nav__item> <a href=../../../jellyfin/ class=md-nav__link> Jellyfin </a> </li> <li class=md-nav__item> <a href=../../../ffmpeg/ class=md-nav__link> ffmpeg </a> </li> <li class=md-nav__item> <a href=../../../kitty/ class=md-nav__link> Kitty </a> </li> <li class=md-nav__item> <a href=../../../linux/luks/luks/ class=md-nav__link> LUKS </a> </li> <li class=md-nav__item> <a href=../../../mbsync/ class=md-nav__link> mbsync </a> </li> <li class=md-nav__item> <a href=../../../linux/mkdocs/ class=md-nav__link> mkdocs </a> </li> <li class=md-nav__item> <a href=../../../modipy.md class=md-nav__link> Modipy </a> </li> <li class=md-nav__item> <a href=../../../linux/monica/ class=md-nav__link> monica </a> </li> <li class=md-nav__item> <a href=../../../notmuch/ class=md-nav__link> notmuch </a> </li> <li class=md-nav__item> <a href=../../../linux/nodejs/ class=md-nav__link> nodejs </a> </li> <li class=md-nav__item> <a href=../../../oracle_database/ class=md-nav__link> Oracle Database </a> </li> <li class=md-nav__item> <a href=../../../peek/ class=md-nav__link> Peek </a> </li> <li class=md-nav__item> <a href=../../../linux/rm/ class=md-nav__link> rm </a> </li> <li class=md-nav__item> <a href=../../../linux/syncthing/ class=md-nav__link> Syncthing </a> </li> <li class=md-nav__item> <a href=../../../tahoe/ class=md-nav__link> Tahoe-LAFS </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10_1_36 type=checkbox id=__nav_10_1_36> <div class="md-nav__link md-nav__link--index "> <a href=../../../vim/ >Vim</a> <label for=__nav_10_1_36> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Vim data-md-level=3> <label class=md-nav__title for=__nav_10_1_36> <span class="md-nav__icon md-icon"></span> Vim </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../wake_on_lan/ class=md-nav__link> Wake on Lan </a> </li> <li class=md-nav__item> <a href=../../../linux/wireguard/ class=md-nav__link> Wireguard </a> </li> <li class=md-nav__item> <a href=../../../linux/zfs/ class=md-nav__link> ZFS </a> </li> <li class=md-nav__item> <a href=../../../linux/zip/ class=md-nav__link> zip </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10_2 type=checkbox id=__nav_10_2> <label class=md-nav__link for=__nav_10_2> Android <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Android data-md-level=2> <label class=md-nav__title for=__nav_10_2> <span class="md-nav__icon md-icon"></span> Android </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cone/ class=md-nav__link> cone </a> </li> <li class=md-nav__item> <a href=../../../gadgetbridge/ class=md-nav__link> GadgetBridge </a> </li> <li class=md-nav__item> <a href=../../../osmand/ class=md-nav__link> OsmAnd </a> </li> <li class=md-nav__item> <a href=../../../signal/ class=md-nav__link> Signal </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11 type=checkbox id=__nav_11> <label class=md-nav__link for=__nav_11> Arts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Arts data-md-level=1> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> Arts </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_1 type=checkbox id=__nav_11_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../writing/writing/ >Writing</a> <label for=__nav_11_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Writing data-md-level=2> <label class=md-nav__title for=__nav_11_1> <span class="md-nav__icon md-icon"></span> Writing </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_2 type=checkbox id=__nav_11_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../cooking/ >Cooking</a> </div> <nav class=md-nav aria-label=Cooking data-md-level=2> <label class=md-nav__title for=__nav_11_2> <span class="md-nav__icon md-icon"></span> Cooking </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../pilates/ class=md-nav__link> Pilates </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_4 type=checkbox id=__nav_11_4> <label class=md-nav__link for=__nav_11_4> Dancing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Dancing data-md-level=2> <label class=md-nav__title for=__nav_11_4> <span class="md-nav__icon md-icon"></span> Dancing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../dancing/rave_dances/ class=md-nav__link> Rave Dances </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_4_2 type=checkbox id=__nav_11_4_2> <label class=md-nav__link for=__nav_11_4_2> Shuffle <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Shuffle data-md-level=3> <label class=md-nav__title for=__nav_11_4_2> <span class="md-nav__icon md-icon"></span> Shuffle </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../dancing/shuffle_basics/ class=md-nav__link> Basics </a> </li> <li class=md-nav__item> <a href=../../../dancing/shuffle_kicks/ class=md-nav__link> Kicks </a> </li> <li class=md-nav__item> <a href=../../../dancing/shuffle_spins/ class=md-nav__link> Spins </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../dancing/cutting_shapes_basics/ class=md-nav__link> Cutting Shapes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../meditation/ class=md-nav__link> Meditation </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_6 type=checkbox id=__nav_11_6> <label class=md-nav__link for=__nav_11_6> Video Gaming <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Video Gaming" data-md-level=2> <label class=md-nav__title for=__nav_11_6> <span class="md-nav__icon md-icon"></span> Video Gaming </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_6_1 type=checkbox id=__nav_11_6_1> <label class=md-nav__link for=__nav_11_6_1> The Battle for Wesnoth <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="The Battle for Wesnoth" data-md-level=3> <label class=md-nav__title for=__nav_11_6_1> <span class="md-nav__icon md-icon"></span> The Battle for Wesnoth </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../wesnoth/ class=md-nav__link> The Battle for Wesnoth </a> </li> <li class=md-nav__item> <a href=../../../wesnoth_loyalist/ class=md-nav__link> Loyalist </a> </li> <li class=md-nav__item> <a href=../../../wesnoth_rebels/ class=md-nav__link> Rebels </a> </li> <li class=md-nav__item> <a href=../../../wesnoth_northerners/ class=md-nav__link> Northeners </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_7 type=checkbox id=__nav_11_7> <label class=md-nav__link for=__nav_11_7> Board Gaming <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Board Gaming" data-md-level=2> <label class=md-nav__title for=__nav_11_7> <span class="md-nav__icon md-icon"></span> Board Gaming </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../regicide/ class=md-nav__link> Regicide </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_8 type=checkbox id=__nav_11_8> <div class="md-nav__link md-nav__link--index "> <a href=../../../drawing/drawing/ >Drawing</a> </div> <nav class=md-nav aria-label=Drawing data-md-level=2> <label class=md-nav__title for=__nav_11_8> <span class="md-nav__icon md-icon"></span> Drawing </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../origami/ class=md-nav__link> Origami </a> </li> <li class=md-nav__item> <a href=../../../fun/ class=md-nav__link> Fun </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_12 type=checkbox id=__nav_12> <label class=md-nav__link for=__nav_12> Psychology <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Psychology data-md-level=1> <label class=md-nav__title for=__nav_12> <span class="md-nav__icon md-icon"></span> Psychology </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../psychology/the_xy_problem/ class=md-nav__link> The XY Problem </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_13 type=checkbox id=__nav_13> <label class=md-nav__link for=__nav_13> Botany <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Botany data-md-level=1> <label class=md-nav__title for=__nav_13> <span class="md-nav__icon md-icon"></span> Botany </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../botany/trees/ class=md-nav__link> Trees </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../emojis/ class=md-nav__link> Emojis </a> </li> <li class=md-nav__item> <a href=../../../contact/ class=md-nav__link> Contact </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_16 type=checkbox id=__nav_16> <div class="md-nav__link md-nav__link--index "> <a href=../../../newsletter/0_newsletter_index/ >Newsletters</a> <label for=__nav_16> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Newsletters data-md-level=1> <label class=md-nav__title for=__nav_16> <span class="md-nav__icon md-icon"></span> Newsletters </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#advantages-and-disadvantages class=md-nav__link> Advantages and disadvantages </a> </li> <li class=md-nav__item> <a href=#usage class=md-nav__link> Usage </a> <nav class=md-nav aria-label=Usage> <ul class=md-nav__list> <li class=md-nav__item> <a href=#function-annotations class=md-nav__link> Function annotations </a> </li> <li class=md-nav__item> <a href=#variable-annotations class=md-nav__link> Variable annotations </a> </li> <li class=md-nav__item> <a href=#composite-types class=md-nav__link> Composite types </a> <nav class=md-nav aria-label="Composite types"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dictionaries-with-different-value-types-per-key class=md-nav__link> Dictionaries with different value types per key. </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#functions-without-return-values class=md-nav__link> Functions without return values </a> </li> <li class=md-nav__item> <a href=#optional-arguments class=md-nav__link> Optional arguments </a> </li> <li class=md-nav__item> <a href=#type-aliases class=md-nav__link> Type aliases </a> </li> <li class=md-nav__item> <a href=#allow-any-subclass class=md-nav__link> Allow any subclass </a> <nav class=md-nav aria-label="Allow any subclass"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#deduce-returned-value-type-from-the-arguments class=md-nav__link> Deduce returned value type from the arguments </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#define-a-typevar-with-restrictions class=md-nav__link> Define a TypeVar with restrictions </a> <nav class=md-nav aria-label="Define a TypeVar with restrictions"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#use-a-constrained-typevar-in-the-definition-of-a-class-attributes class=md-nav__link> Use a constrained TypeVar in the definition of a class attributes. </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#specify-the-type-of-the-class-in-its-method-and-attributes class=md-nav__link> Specify the type of the class in it's method and attributes </a> </li> <li class=md-nav__item> <a href=#type-hints-of-generators class=md-nav__link> Type hints of Generators </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-mypy-with-an-existing-codebase class=md-nav__link> Using mypy with an existing codebase </a> </li> <li class=md-nav__item> <a href=#reveal-the-type-of-an-expression class=md-nav__link> Reveal the type of an expression </a> </li> <li class=md-nav__item> <a href=#solve-cyclic-imports-due-to-typing class=md-nav__link> Solve cyclic imports due to typing </a> </li> <li class=md-nav__item> <a href=#make-your-library-compatible-with-mypy class=md-nav__link> Make your library compatible with mypy </a> </li> <li class=md-nav__item> <a href=#reference class=md-nav__link> Reference </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/lyz-code/blue-book/edit/master/docs/coding/python/type_hints.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>Type Hints</h1> <p><a href=https://realpython.com/python-type-checking/#type-systems>Type hints</a> are the Python native way to define the type of the objects in a program.</p> <p>Traditionally, the Python interpreter handles types in a flexible but implicit way. Recent versions of Python allow you to specify explicit type hints that different tools can use to help you develop your code more efficiently.</p> <div class="admonition note"> <p class=admonition-title>TL;DR</p> <p><a href=https://www.bernat.tech/the-state-of-type-hints-in-python/ >Use Type hints whenever unit tests are worth writing</a></p> </div> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>headline</span><span class=p>(</span><span class=n>text</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>align</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
    <span class=k>if</span> <span class=n>align</span><span class=p>:</span>
        <span class=k>return</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>text</span><span class=o>.</span><span class=n>title</span><span class=p>()</span><span class=si>}</span><span class=se>\n</span><span class=si>{</span><span class=s1>&#39;-&#39;</span> <span class=o>*</span> <span class=nb>len</span><span class=p>(</span><span class=n>text</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=sa>f</span><span class=s2>&quot; </span><span class=si>{</span><span class=n>text</span><span class=o>.</span><span class=n>title</span><span class=p>()</span><span class=si>}</span><span class=s2> &quot;</span><span class=o>.</span><span class=n>center</span><span class=p>(</span><span class=mi>50</span><span class=p>,</span> <span class=s2>&quot;o&quot;</span><span class=p>)</span>
</code></pre></div> <p>Type hints are not enforced on their own by python. So you won't catch an error if you try to run <code>headline("use mypy", align="center")</code> unless you use a static type checker like <a href=http://mypy-lang.org/ >Mypy</a>.</p> <h2 id=advantages-and-disadvantages>Advantages and disadvantages<a class=headerlink href=#advantages-and-disadvantages title="Permanent link">⚑</a></h2> <p>Advantages:</p> <ul> <li>Help <strong>catch certain errors</strong> if used with a static type checker.</li> <li>Help <strong>check your code</strong>. It's not trivial to use docstrings to do automatic checks.</li> <li>Help to reason about code: Knowing the parameters type makes it a lot easier to understand and maintain a code base. It can speed up the time required to catch up with a code snippet. Always remember that you read code a lot more often than you write it, so you should optimize for ease of reading.</li> <li> <p>Help you <strong>build and maintain a cleaner architecture</strong>. The act of writing type hints force you to think about the types in your program.</p> </li> <li> <p>Helps refactoring: Type hints make it trivial to find where a given class is used when you're trying to refactor your code base.</p> </li> <li>Improve IDEs and linters.</li> </ul> <p>Cons:</p> <ul> <li>Type hints <strong>take developer time and effort to add</strong>. Even though it probably pays off in spending less time debugging, you will spend more time entering code.</li> <li><strong>Introduce a slight penalty in start-up time</strong>. If you need to use the typing module, the import time may be significant, even more in short scripts.</li> <li>Work best in modern Pythons.</li> </ul> <p>Follow these guidelines when deciding if you want to add types to your project:</p> <ul> <li>In libraries that will be used by others, they add a lot of value.</li> <li>In complex projects, type hints help you understand how types flow through your code and are highly recommended.</li> <li>If you are beginning to learn Python, don't use them yet.</li> <li>If you are writing throw-away scripts, don't use them.</li> </ul> <p>So, <a href=https://www.bernat.tech/the-state-of-type-hints-in-python/ >Use Type hints whenever unit tests are worth writing</a>.</p> <h2 id=usage>Usage<a class=headerlink href=#usage title="Permanent link">⚑</a></h2> <h3 id=function-annotations>Function annotations<a class=headerlink href=#function-annotations title="Permanent link">⚑</a></h3> <p><div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>func</span><span class=p>(</span><span class=n>arg</span><span class=p>:</span> <span class=n>arg_type</span><span class=p>,</span> <span class=n>optarg</span><span class=p>:</span> <span class=n>arg_type</span> <span class=o>=</span> <span class=n>default</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>return_type</span><span class=p>:</span>
    <span class=o>...</span>
</code></pre></div> For arguments the syntax is <code>argument: annotation</code>, while the return type is annotated using <code>-&gt; annotation</code>. Note that the annotation must be a valid Python expression.</p> <p>When running the code, the special <code>.__annotations__</code> attribute on the function stores the typing information.</p> <h3 id=variable-annotations>Variable annotations<a class=headerlink href=#variable-annotations title="Permanent link">⚑</a></h3> <p>Sometimes the type checker needs help in figuring out the types of variables as well. The syntax is similar:</p> <div class=highlight><pre><span></span><code><span class=n>pi</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>3.142</span>

<span class=k>def</span> <span class=nf>circumference</span><span class=p>(</span><span class=n>radius</span><span class=p>:</span> <span class=nb>float</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
    <span class=k>return</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>pi</span> <span class=o>*</span> <span class=n>radius</span>
</code></pre></div> <h3 id=composite-types>Composite types<a class=headerlink href=#composite-types title="Permanent link">⚑</a></h3> <p>If you need to hint other types than <code>str</code>, <code>float</code> and <code>bool</code>, you'll need to import the <code>typing</code> module.</p> <p>For example to define the hint types of list, dictionaries and tuples:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>List</span><span class=p>,</span> <span class=n>Tuple</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>names</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;Guido&quot;</span><span class=p>,</span> <span class=s2>&quot;Jukka&quot;</span><span class=p>,</span> <span class=s2>&quot;Ivan&quot;</span><span class=p>]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>version</span><span class=p>:</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>int</span><span class=p>,</span> <span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>options</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;centered&quot;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=s2>&quot;capitalize&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>}</span>
</code></pre></div> <p>If your function expects some kind of sequence but don't care whether it's a list or a tuple, use the <code>typing.Sequence</code> object.</p> <h4 id=dictionaries-with-different-value-types-per-key><a href=https://stackoverflow.com/questions/53409117/what-are-the-main-differences-of-namedtuple-and-typeddict-in-python-mypy>Dictionaries with different value types per key</a>.<a class=headerlink href=#dictionaries-with-different-value-types-per-key title="Permanent link">⚑</a></h4> <p><a href=https://docs.python.org/3/library/typing.html#typing.TypedDict><code>TypedDict</code></a> declares a dictionary type that expects all of its instances to have a certain set of keys, where each key is associated with a value of a consistent type. This expectation is not checked at runtime but is only enforced by type checkers.</p> <p>TypedDict started life as an experimental Mypy feature to wrangle typing onto the heterogeneous, structure-oriented use of dictionaries. As of Python 3.8, it was adopted into the standard library.</p> <div class=highlight><pre><span></span><code><span class=k>try</span><span class=p>:</span>
    <span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>TypedDict</span>  <span class=c1># &gt;=3.8</span>
<span class=k>except</span> <span class=ne>ImportError</span><span class=p>:</span>
    <span class=kn>from</span> <span class=nn>mypy_extensions</span> <span class=kn>import</span> <span class=n>TypedDict</span>  <span class=c1># &lt;=3.7</span>

<span class=n>Movie</span> <span class=o>=</span> <span class=n>TypedDict</span><span class=p>(</span><span class=s1>&#39;Movie&#39;</span><span class=p>,</span> <span class=p>{</span><span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=s1>&#39;year&#39;</span><span class=p>:</span> <span class=nb>int</span><span class=p>})</span>
</code></pre></div> <p>A class-based type constructor is also available:</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Movie</span><span class=p>(</span><span class=n>TypedDict</span><span class=p>):</span>
    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span>
    <span class=n>year</span><span class=p>:</span> <span class=nb>int</span>
</code></pre></div> <p>By default, all keys must be present in a <code>TypedDict</code>. It is possible to override this by specifying totality. Usage:</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>point2D</span><span class=p>(</span><span class=n>TypedDict</span><span class=p>,</span> <span class=n>total</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
    <span class=n>x</span><span class=p>:</span> <span class=nb>int</span>
    <span class=n>y</span><span class=p>:</span> <span class=nb>int</span>
</code></pre></div> <p>This means that a <code>point2D</code> <code>TypedDict</code> can have any of the keys omitted. A type checker is only expected to support a literal False or True as the value of the total argument. True is the default, and makes all items defined in the class body be required.</p> <h3 id=functions-without-return-values>Functions without return values<a class=headerlink href=#functions-without-return-values title="Permanent link">⚑</a></h3> <p>Some functions aren't meant to return anything. Use the <code>-&gt; None</code> hint in these cases.</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=n>player_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>

    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>player_name</span><span class=si>}</span><span class=s2> plays&quot;</span><span class=p>)</span>


<span class=n>ret_val</span> <span class=o>=</span> <span class=n>play</span><span class=p>(</span><span class=s2>&quot;Filip&quot;</span><span class=p>)</span>
</code></pre></div> <p>The annotation help catch the kinds of subtle bugs where you are trying to use a meaningless return value.</p> <p>If your function doesn't return any object, use the <code>NoReturn</code> type.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>NoReturn</span>

<span class=k>def</span> <span class=nf>black_hole</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>NoReturn</span><span class=p>:</span>
    <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=s2>&quot;There is no going back ...&quot;</span><span class=p>)</span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>This is the first iteration of the synoptical reading of the full <a href=https://realpython.com/python-type-checking/#type-systems>Real python article on type checking</a>.</p> </div> <h3 id=optional-arguments>Optional arguments<a class=headerlink href=#optional-arguments title="Permanent link">⚑</a></h3> <p>A common pattern is to use <code>None</code> as a default value for an argument. This is done either to avoid problems with <a href=../python_anti_patterns/#mutable-default-arguments>mutable default values</a> or to have a sentinel value flagging special behavior.</p> <p>This creates a challenge for type hinting as the argument may be of type string (for example) but it can also be <code>None</code>. We use the <code>Optional</code> type to address this case.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Optional</span>

<span class=k>def</span> <span class=nf>player</span><span class=p>(</span><span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>start</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
    <span class=o>...</span>
</code></pre></div> <p>A similar way would be to use <code>Union[None, str]</code>.</p> <h3 id=type-aliases>Type aliases<a class=headerlink href=#type-aliases title="Permanent link">⚑</a></h3> <p>Type hints might become oblique when working with nested types. If it's the case, save them into a new variable, and use that instead.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Tuple</span>

<span class=n>Card</span> <span class=o>=</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span>
<span class=n>Deck</span> <span class=o>=</span> <span class=n>List</span><span class=p>[</span><span class=n>Card</span><span class=p>]</span>

<span class=k>def</span> <span class=nf>deal_hands</span><span class=p>(</span><span class=n>deck</span><span class=p>:</span> <span class=n>Deck</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>Deck</span><span class=p>,</span> <span class=n>Deck</span><span class=p>,</span> <span class=n>Deck</span><span class=p>,</span> <span class=n>Deck</span><span class=p>]:</span>

    <span class=sd>&quot;&quot;&quot;Deal the cards in the deck into four hands&quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=p>(</span><span class=n>deck</span><span class=p>[</span><span class=mi>0</span><span class=p>::</span><span class=mi>4</span><span class=p>],</span> <span class=n>deck</span><span class=p>[</span><span class=mi>1</span><span class=p>::</span><span class=mi>4</span><span class=p>],</span> <span class=n>deck</span><span class=p>[</span><span class=mi>2</span><span class=p>::</span><span class=mi>4</span><span class=p>],</span> <span class=n>deck</span><span class=p>[</span><span class=mi>3</span><span class=p>::</span><span class=mi>4</span><span class=p>])</span>
</code></pre></div> <h3 id=allow-any-subclass><a href=https://mypy.readthedocs.io/en/stable/kinds_of_types.html#class-types>Allow any subclass</a><a class=headerlink href=#allow-any-subclass title="Permanent link">⚑</a></h3> <p>Every class is also a valid type. Any instance of a subclass is also compatible with all superclasses – it follows that every value is compatible with the object type (and incidentally also the Any type, discussed below). Mypy analyzes the bodies of classes to determine which methods and attributes are available in instances. For example</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>A</span><span class=p>:</span>
    <span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>  <span class=c1># Type of self inferred (A)</span>
        <span class=k>return</span> <span class=mi>2</span>

<span class=k>class</span> <span class=nc>B</span><span class=p>(</span><span class=n>A</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
         <span class=k>return</span> <span class=mi>3</span>
    <span class=k>def</span> <span class=nf>g</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
        <span class=k>return</span> <span class=mi>4</span>

<span class=k>def</span> <span class=nf>foo</span><span class=p>(</span><span class=n>a</span><span class=p>:</span> <span class=n>A</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>f</span><span class=p>())</span>  <span class=c1># 3</span>
    <span class=n>a</span><span class=o>.</span><span class=n>g</span><span class=p>()</span>         <span class=c1># Error: &quot;A&quot; has no attribute &quot;g&quot;</span>

<span class=n>foo</span><span class=p>(</span><span class=n>B</span><span class=p>())</span>  <span class=c1># OK (B is a subclass of A)</span>
</code></pre></div> <h4 id=deduce-returned-value-type-from-the-arguments><a href=https://mypy.readthedocs.io/en/stable/kinds_of_types.html#the-type-of-class-objects>Deduce returned value type from the arguments</a><a class=headerlink href=#deduce-returned-value-type-from-the-arguments title="Permanent link">⚑</a></h4> <p>The previous approach works if you don't need to use class objects that inherit from a given class. For example:</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>User</span><span class=p>:</span>
    <span class=c1># Defines fields like name, email</span>

<span class=k>class</span> <span class=nc>BasicUser</span><span class=p>(</span><span class=n>User</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>upgrade</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=sd>&quot;&quot;&quot;Upgrade to Pro&quot;&quot;&quot;</span>

<span class=k>class</span> <span class=nc>ProUser</span><span class=p>(</span><span class=n>User</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>pay</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=sd>&quot;&quot;&quot;Pay bill&quot;&quot;&quot;</span>

<span class=k>def</span> <span class=nf>new_user</span><span class=p>(</span><span class=n>user_class</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>User</span><span class=p>:</span>
    <span class=n>user</span> <span class=o>=</span> <span class=n>user_class</span><span class=p>()</span>
    <span class=c1># (Here we could write the user object to a database)</span>
    <span class=k>return</span> <span class=n>user</span>
</code></pre></div> <p>Where:</p> <ul> <li><code>ProUser</code> doesn’t inherit from <code>BasicUser</code>.</li> <li><code>new_user</code> creates an instance of one of these classes if you pass it the right class object.</li> </ul> <p>The problem is that right now mypy doesn't know which subclass of <code>User</code> you're giving it, and will only accept the methods and attributes defined in the parent class <code>User</code>.</p> <div class=highlight><pre><span></span><code><span class=n>buyer</span> <span class=o>=</span> <span class=n>new_user</span><span class=p>(</span><span class=n>ProUser</span><span class=p>)</span>
<span class=n>buyer</span><span class=o>.</span><span class=n>pay</span><span class=p>()</span>  <span class=c1># Rejected, not a method on User</span>
</code></pre></div> <p>This can be solved using <a href=https://mypy.readthedocs.io/en/stable/generics.html#type-variable-upper-bound>Type variables with upper bounds</a>.</p> <div class=highlight><pre><span></span><code><span class=n>UserType</span> <span class=o>=</span> <span class=n>TypeVar</span><span class=p>(</span><span class=s1>&#39;UserType&#39;</span><span class=p>,</span> <span class=n>bound</span><span class=o>=</span><span class=n>User</span><span class=p>)</span>

<span class=k>def</span> <span class=nf>new_user</span><span class=p>(</span><span class=n>user_class</span><span class=p>:</span> <span class=n>Type</span><span class=p>[</span><span class=n>UserType</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>UserType</span><span class=p>:</span>
    <span class=c1># Same  implementation as before</span>
</code></pre></div> <p>We're creating a new type <code>UserType</code> that is linked to the class or subclasses of <code>User</code>. That way, mypy knows that the return value is an object created from the class given in the argument <code>user_class</code>.</p> <div class=highlight><pre><span></span><code><span class=n>beginner</span> <span class=o>=</span> <span class=n>new_user</span><span class=p>(</span><span class=n>BasicUser</span><span class=p>)</span>  <span class=c1># Inferred type is BasicUser</span>
<span class=n>beginner</span><span class=o>.</span><span class=n>upgrade</span><span class=p>()</span>  <span class=c1># OK</span>
</code></pre></div> <p>Keep in mind that the <code>TypeVar</code> is a <a href=https://mypy.readthedocs.io/en/stable/generics.html>Generic type</a>, as such, they take one or more type parameters, similar to built-in types such as <code>List[X]</code>.</p> <p>That means that when you create type aliases, you'll need to give the type parameter. So:</p> <div class=highlight><pre><span></span><code><span class=n>UserType</span> <span class=o>=</span> <span class=n>TypeVar</span><span class=p>(</span><span class=s2>&quot;UserType&quot;</span><span class=p>,</span> <span class=n>bound</span><span class=o>=</span><span class=n>User</span><span class=p>)</span>
<span class=n>UserTypes</span> <span class=o>=</span> <span class=n>List</span><span class=p>[</span><span class=n>Type</span><span class=p>[</span><span class=n>UserType</span><span class=p>]]</span>


<span class=k>def</span> <span class=nf>new_users</span><span class=p>(</span><span class=n>user_class</span><span class=p>:</span> <span class=n>UserTypes</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>UserType</span><span class=p>:</span> <span class=c1># Type error!</span>
    <span class=k>pass</span>
</code></pre></div> <p>Will give a <code>Missing type parameters for generic type "UserTypes"</code> error. To solve it use:</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>new_users</span><span class=p>(</span><span class=n>user_class</span><span class=p>:</span> <span class=n>UserTypes</span><span class=p>[</span><span class=n>UserType</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>UserType</span><span class=p>:</span> <span class=c1># OK!</span>
    <span class=k>pass</span>
</code></pre></div> <h3 id=define-a-typevar-with-restrictions><a href=https://mypy.readthedocs.io/en/stable/generics.html#type-variables-with-value-restriction>Define a TypeVar with restrictions</a><a class=headerlink href=#define-a-typevar-with-restrictions title="Permanent link">⚑</a></h3> <p>By default, a type variable can be replaced with any type. However, sometimes it’s useful to have a type variable that can only have some specific types as its value. A typical example is a type variable that can only have values <code>str</code> and <code>bytes</code>:</p> <p><div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>TypeVar</span>

<span class=n>AnyStr</span> <span class=o>=</span> <span class=n>TypeVar</span><span class=p>(</span><span class=s1>&#39;AnyStr&#39;</span><span class=p>,</span> <span class=nb>str</span><span class=p>,</span> <span class=nb>bytes</span><span class=p>)</span>
</code></pre></div> This is actually such a common type variable that <code>AnyStr</code> is defined in typing and we don’t need to define it ourselves.</p> <p>We can use <code>AnyStr</code> to define a function that can concatenate two strings or bytes objects, but it can’t be called with other argument types:</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>AnyStr</span>

<span class=k>def</span> <span class=nf>concat</span><span class=p>(</span><span class=n>x</span><span class=p>:</span> <span class=n>AnyStr</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>AnyStr</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AnyStr</span><span class=p>:</span>
    <span class=k>return</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span>

<span class=n>concat</span><span class=p>(</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>)</span>    <span class=c1># Okay</span>
<span class=n>concat</span><span class=p>(</span><span class=sa>b</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=sa>b</span><span class=s1>&#39;b&#39;</span><span class=p>)</span>  <span class=c1># Okay</span>
<span class=n>concat</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>        <span class=c1># Error!</span>
</code></pre></div> <p>Note that this is different from a union type, since combinations of <code>str</code> and <code>bytes</code> are not accepted:</p> <div class=highlight><pre><span></span><code><span class=n>concat</span><span class=p>(</span><span class=s1>&#39;string&#39;</span><span class=p>,</span> <span class=sa>b</span><span class=s1>&#39;bytes&#39;</span><span class=p>)</span>   <span class=c1># Error!</span>
</code></pre></div> <p>In this case, this is exactly what we want, since it’s not possible to concatenate a string and a bytes object! The type checker will reject this function:</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>union_concat</span><span class=p>(</span><span class=n>x</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>bytes</span><span class=p>],</span> <span class=n>y</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>bytes</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>bytes</span><span class=p>]:</span>
    <span class=k>return</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span>  <span class=c1># Error: can&#39;t concatenate str and bytes</span>
</code></pre></div> <h4 id=use-a-constrained-typevar-in-the-definition-of-a-class-attributes>Use a constrained TypeVar in the definition of a class attributes.<a class=headerlink href=#use-a-constrained-typevar-in-the-definition-of-a-class-attributes title="Permanent link">⚑</a></h4> <p>If you try to use a <code>TypeVar</code> in the definition of a class attribute:</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>File</span><span class=p>:</span>
    <span class=sd>&quot;&quot;&quot;Model a computer file.&quot;&quot;&quot;</span>

    <span class=n>path</span><span class=p>:</span> <span class=nb>str</span>
    <span class=n>content</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>AnyStr</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span> <span class=c1># mypy error!</span>
</code></pre></div> <p><a href=../../../devops/mypy/ >mypy</a> will complain with <code>Type variable AnyStr is unbound [valid-type]</code>, to solve it, you need to make the class inherit from the <code>Generic[AnyStr]</code>.</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>File</span><span class=p>(</span><span class=n>Generic</span><span class=p>[</span><span class=n>AnyStr</span><span class=p>]):</span>
    <span class=sd>&quot;&quot;&quot;Model a computer file.&quot;&quot;&quot;</span>

    <span class=n>path</span><span class=p>:</span> <span class=nb>str</span>
    <span class=n>content</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>AnyStr</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div> <p>Why you ask? I have absolutely no clue. I've asked that question in the <a href=https://gitter.im/python/typing#>gitter python typing channel</a> but the kind answer that @ktbarrett gave me sounded like Chinese.</p> <blockquote> <p>You can't just use a type variable for attributes or variables, you have to create some generic context, whether that be a function or a class, so that you can instantiate the generic context (or the analyzer can infer it) (i.e. context[var]). That's not possible if you don't specify that the class is a generic context. It also ensure than all uses of that variable in the context resolve to the same type.</p> </blockquote> <p>If you don't mind helping me understand it, please <a href=../../../contact/ >contact me</a>.</p> <h3 id=specify-the-type-of-the-class-in-its-method-and-attributes><a href=https://stackoverflow.com/questions/33533148/how-do-i-specify-that-the-return-type-of-a-method-is-the-same-as-the-class-itsel>Specify the type of the class in it's method and attributes</a><a class=headerlink href=#specify-the-type-of-the-class-in-its-method-and-attributes title="Permanent link">⚑</a></h3> <p>If you are using Python 3.10 or later, it just works. Python 3.7 introduces PEP 563: postponed evaluation of annotations. A module that uses the future statement <code>from __future__ import annotations</code> to store annotations as strings automatically:</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>__future__</span> <span class=kn>import</span> <span class=n>annotations</span>

<span class=k>class</span> <span class=nc>Position</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__add__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=n>Position</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Position</span><span class=p>:</span>
        <span class=o>...</span>
</code></pre></div> <p>But <code>pyflakes</code> will still complain, so I've used strings.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>__future__</span> <span class=kn>import</span> <span class=n>annotations</span>

<span class=k>class</span> <span class=nc>Position</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__add__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=s1>&#39;Position&#39;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s1>&#39;Position&#39;</span><span class=p>:</span>
        <span class=o>...</span>
</code></pre></div> <h3 id=type-hints-of-generators><a href=https://stackoverflow.com/questions/42531143/type-hinting-generator-in-python-3-6>Type hints of Generators</a><a class=headerlink href=#type-hints-of-generators title="Permanent link">⚑</a></h3> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Generator</span>

<span class=k>def</span> <span class=nf>generate</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>Generator</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=kc>None</span><span class=p>,</span> <span class=kc>None</span><span class=p>]:</span>
</code></pre></div> <p>Where the first argument of <code>Generator</code> is the type of the yielded value.</p> <h2 id=using-mypy-with-an-existing-codebase><a href=https://mypy.readthedocs.io/en/latest/existing_code.html>Using mypy with an existing codebase</a><a class=headerlink href=#using-mypy-with-an-existing-codebase title="Permanent link">⚑</a></h2> <p>These steps will get you started with <code>mypy</code> on an existing codebase:</p> <ul> <li> <p><a href=https://mypy.readthedocs.io/en/latest/existing_code.html#start-small>Start small</a>: Pick a subset of your codebase to run mypy on, without any annotations.</p> <p>You’ll probably need to fix some mypy errors, either by inserting annotations requested by mypy or by adding <code># type: ignore</code> comments to silence errors you don’t want to fix now.</p> <p>Get a clean mypy build for some files, with some annotations. * <a href=https://mypy.readthedocs.io/en/latest/existing_code.html#mypy-runner-script>Write a mypy runner script</a> to ensure consistent results. Here are some steps you may want to do in the script: * Ensure that you install the correct version of mypy. * Specify mypy config file or command-line options. * Provide set of files to type check. You may want to configure the inclusion and exclusion filters for full control of the file list. * <a href=../../../devops/mypy/ >Run mypy in Continuous Integration to prevent type errors</a>:</p> <p>Once you have a clean mypy run and a runner script for a part of your codebase, set up your Continuous Integration (CI) system to run mypy to ensure that developers won’t introduce bad annotations. A small CI script could look something like this:</p> <p><div class=highlight><pre><span></span><code><span class=n>python3</span> <span class=o>-</span><span class=n>m</span> <span class=n>pip</span> <span class=n>install</span> <span class=n>mypy</span><span class=o>==</span><span class=mf>0.600</span>  <span class=c1># Pinned version avoids surprises</span>
<span class=n>scripts</span><span class=o>/</span><span class=n>mypy</span>  <span class=c1># Runs with the correct options</span>
</code></pre></div> * Gradually annotate commonly imported modules: Most projects have some widely imported modules, such as utilities or model classes. It’s a good idea to annotate these soon, since this allows code using these modules to be type checked more effectively. Since mypy supports gradual typing, it’s okay to leave some of these modules unannotated. The more you annotate, the more useful mypy will be, but even a little annotation coverage is useful. * Write annotations as you change existing code and write new code: Now you are ready to include type annotations in your development workflows. Consider adding something like these in your code style conventions:</p> <ul> <li>Developers should add annotations for any new code.</li> <li>It’s also encouraged to write annotations when you change existing code.</li> </ul> </li> </ul> <p>If you need to <a href=https://stackoverflow.com/questions/51179109/set-pyflake-and-mypy-ignore-same-line>ignore a linter error and a type error</a> use first the type and then the linter. For example, <code># type: ignore # noqa: W0212</code>.</p> <h2 id=reveal-the-type-of-an-expression><a href="https://mypy.readthedocs.io/en/stable/common_issues.html?highlight=get%20type%20of%20object#displaying-the-type-of-an-expression">Reveal the type of an expression</a><a class=headerlink href=#reveal-the-type-of-an-expression title="Permanent link">⚑</a></h2> <p>You can use <code>reveal_type(expr)</code> to ask mypy to display the inferred static type of an expression. This can be useful when you don't quite understand how mypy handles a particular piece of code. Example:</p> <div class=highlight><pre><span></span><code><span class=n>reveal_type</span><span class=p>((</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;hello&#39;</span><span class=p>))</span>  <span class=c1># Revealed type is &#39;Tuple[builtins.int, builtins.str]&#39;</span>
</code></pre></div> <p>You can also use <code>reveal_locals()</code> at any line in a file to see the types of all local variables at once. Example:</p> <div class=highlight><pre><span></span><code><span class=n>a</span> <span class=o>=</span> <span class=mi>1</span>
<span class=n>b</span> <span class=o>=</span> <span class=s1>&#39;one&#39;</span>
<span class=n>reveal_locals</span><span class=p>()</span>
<span class=c1># Revealed local types are:</span>
<span class=c1>#     a: builtins.int</span>
<span class=c1>#     b: builtins.str</span>
</code></pre></div> <p><code>reveal_type</code> and <code>reveal_locals</code> are only understood by mypy and don't exist in Python. If you try to run your program, you’ll have to remove any <code>reveal_type</code> and <code>reveal_locals</code> calls before you can run your code. Both are always available and you don't need to import them.</p> <h2 id=solve-cyclic-imports-due-to-typing><a href=https://www.stefaanlippens.net/circular-imports-type-hints-python.html>Solve cyclic imports due to typing</a><a class=headerlink href=#solve-cyclic-imports-due-to-typing title="Permanent link">⚑</a></h2> <p>You can use a conditional import that is only active in "type hinting mode", but doesn't interfere at run time. The <code>typing.TYPE_CHECKING</code> constant makes this easily possible. For example:</p> <div class=highlight><pre><span></span><code><span class=c1># thing.py</span>
<span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>TYPE_CHECKING</span>
<span class=k>if</span> <span class=n>TYPE_CHECKING</span><span class=p>:</span>
    <span class=kn>from</span> <span class=nn>connection</span> <span class=kn>import</span> <span class=n>ApiConnection</span>

<span class=k>class</span> <span class=nc>Thing</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>connection</span><span class=p>:</span> <span class=s1>&#39;ApiConnection&#39;</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_conn</span> <span class=o>=</span> <span class=n>connection</span>
</code></pre></div> <p>The code will now execute properly as there is no circular import issue anymore. Type hinting tools on the other hand should still be able to resolve the <code>ApiConnection</code> type hint in <code>Thing.__init__</code>.</p> <h2 id=make-your-library-compatible-with-mypy><a href=https://mypy.readthedocs.io/en/stable/installed_packages.html#making-pep-561-compatible-packages>Make your library compatible with mypy</a><a class=headerlink href=#make-your-library-compatible-with-mypy title="Permanent link">⚑</a></h2> <p><a href=https://www.python.org/dev/peps/pep-0561>PEP 561</a> notes three main ways to distribute type information. The first is a package that has only inline type annotations in the code itself. The second is a package that ships stub files with type information alongside the runtime code. The third method, also known as a “stub only package” is a package that ships type information for a package separately as stub files.</p> <p>If you would like to publish a library package to a package repository (e.g. PyPI) for either internal or external use in type checking, packages that supply type information via type comments or annotations in the code should put a <code>py.typed</code> file in their package directory. For example, with a directory structure as follows</p> <div class=highlight><pre><span></span><code>setup.py
package_a/
    __init__.py
    lib.py
    py.typed
</code></pre></div> <p>the <code>setup.py</code> might look like:</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>distutils.core</span> <span class=kn>import</span> <span class=n>setup</span>

<span class=n>setup</span><span class=p>(</span>
    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;SuperPackageA&quot;</span><span class=p>,</span>
    <span class=n>author</span><span class=o>=</span><span class=s2>&quot;Me&quot;</span><span class=p>,</span>
    <span class=n>version</span><span class=o>=</span><span class=s2>&quot;0.1&quot;</span><span class=p>,</span>
    <span class=n>package_data</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;package_a&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;py.typed&quot;</span><span class=p>]},</span>
    <span class=n>packages</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;package_a&quot;</span><span class=p>]</span>
<span class=p>)</span>
</code></pre></div> <div class="admonition note"> <p>If you use setuptools, you must pass the option <code>zip_safe=False</code> to <code>setup()</code>, or mypy will not be able to find the installed package.</p> </div> <h2 id=reference>Reference<a class=headerlink href=#reference title="Permanent link">⚑</a></h2> <ul> <li><a href=https://www.bernat.tech/the-state-of-type-hints-in-python/ >Bernat gabor article on the state of type hints in python</a></li> <li><a href=https://realpython.com/python-type-checking/#type-systems>Real python article on type checking</a></li> </ul> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2021-11-18T21:34:57+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2021-11-18</span> </small> </div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../yoyo/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Yoyo" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Yoyo </div> </div> </a> <a href=../../../python_logging/ class="md-footer__link md-footer__link--next" aria-label="Next: Logging" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Logging </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/lyz-code target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://lyz-code.github.io/blue-book/newsletter/0_newsletter_index target=_blank rel=noopener title=lyz-code.github.io class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.instant", "navigation.top", "content.code.annotate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.0bbba5b5.min.js"}</script> <script src=../../../assets/javascripts/bundle.e1a181d9.min.js></script> <script src=../../../js/timeago.min.js></script> <script src=../../../js/timeago_mkdocs_material.js></script> </body> </html>