<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="My second brain"><link href=https://lyz-code.github.io/blue-book/coding/python/python_code_styling/ rel=canonical><meta name=author content=Lyz><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1, mkdocs-material-4.6.3"><title>Code styling</title><link rel=stylesheet href=../../../assets/stylesheets/application.adb8469c.css><link rel=stylesheet href=../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content=#546e7a><script src=../../../assets/javascripts/modernizr.86422ebf.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../assets/fonts/material-icons.css><link rel=stylesheet href=../../../stylesheets/extra.css><link rel=stylesheet href=../../../stylesheets/links.css></head> <body dir=ltr data-md-color-primary=blue-grey data-md-color-accent=light-blue> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#commit-message-guidelines tabindex=0 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://lyz-code.github.io/blue-book title="The Blue Book" aria-label="The Blue Book" class="md-header-nav__button md-logo"> <img alt=logo src=../../../img/logo.bmp width=24 height=24> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> The Blue Book </span> <span class=md-header-nav__topic> Code styling </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input aria-label=search name=query placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Type to start searching </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/lyz-code/blue-book/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> lyz-code/blue-book </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://lyz-code.github.io/blue-book title="The Blue Book" class="md-nav__button md-logo"> <img alt=logo src=../../../img/logo.bmp width=48 height=48> </a> The Blue Book </label> <div class=md-nav__source> <a href=https://github.com/lyz-code/blue-book/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> lyz-code/blue-book </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. title=Introduction class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Meta </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-2> Meta </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../meta/meta/ title=Meta class=md-nav__link> Meta </a> </li> <li class=md-nav__item> <a href=../../../projects/projects/ title=Projects class=md-nav__link> Projects </a> </li> <li class=md-nav__item> <a href=../../../wish_list/ title="Wish list" class=md-nav__link> Wish list </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> DevOps </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-3> DevOps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../devops/devops/ title=DevOps class=md-nav__link> DevOps </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-2 type=checkbox id=nav-3-2> <label class=md-nav__link for=nav-3-2> Kubernetes </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-3-2> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes/ title=Kubernetes class=md-nav__link> Kubernetes </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_architecture/ title=Architecture class=md-nav__link> Architecture </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-2-3 type=checkbox id=nav-3-2-3> <label class=md-nav__link for=nav-3-2-3> Resources </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-3-2-3> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_namespaces/ title=Namespaces class=md-nav__link> Namespaces </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_pods/ title=Pods class=md-nav__link> Pods </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_replicasets/ title=ReplicaSets class=md-nav__link> ReplicaSets </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_deployments/ title=Deployments class=md-nav__link> Deployments </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_hpa/ title="Horizontal Pod Autoscaling" class=md-nav__link> Horizontal Pod Autoscaling </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_volumes/ title=Volumes class=md-nav__link> Volumes </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_services/ title=Services class=md-nav__link> Services </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_labels/ title=Labels class=md-nav__link> Labels </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_annotations/ title=Annotations class=md-nav__link> Annotations </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_ingress/ title=Ingress class=md-nav__link> Ingress </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_operators/ title=Operators class=md-nav__link> Operators </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-2-4 type=checkbox id=nav-3-2-4> <label class=md-nav__link for=nav-3-2-4> Kubectl </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-3-2-4> Kubectl </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../devops/kubectl/kubectl/ title=Kubectl class=md-nav__link> Kubectl </a> </li> <li class=md-nav__item> <a href=../../../devops/kubectl/kubectl_installation/ title="Kubectl Installation" class=md-nav__link> Kubectl Installation </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-2-5 type=checkbox id=nav-3-2-5> <label class=md-nav__link for=nav-3-2-5> Additional Components </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-3-2-5> Additional Components </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_metric_server/ title="Metrics Server" class=md-nav__link> Metrics Server </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_ingress_controller/ title="Ingress Controller" class=md-nav__link> Ingress Controller </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_external_dns/ title="External DNS" class=md-nav__link> External DNS </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_cluster_autoscaler/ title="Cluster Autoscaler" class=md-nav__link> Cluster Autoscaler </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_dashboard/ title=Dashboard class=md-nav__link> Dashboard </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_storage_driver/ title="Storage Driver" class=md-nav__link> Storage Driver </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_vertical_pod_autoscaler/ title="Vertical Pod Autoscaler" class=md-nav__link> Vertical Pod Autoscaler </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_networking/ title=Networking class=md-nav__link> Networking </a> </li> <li class=md-nav__item> <a href=../../../devops/kubernetes/kubernetes_tools/ title=Tools class=md-nav__link> Tools </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-3 type=checkbox id=nav-3-3> <label class=md-nav__link for=nav-3-3> Helm </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-3-3> Helm </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../devops/helm/helm/ title=Helm class=md-nav__link> Helm </a> </li> <li class=md-nav__item> <a href=../../../devops/helm/helm_installation/ title="Helm Installation" class=md-nav__link> Helm Installation </a> </li> <li class=md-nav__item> <a href=../../../devops/helm/helm_commands/ title="Helm Commands" class=md-nav__link> Helm Commands </a> </li> <li class=md-nav__item> <a href=../../../devops/helm/helm_secrets/ title="Helm Secrets" class=md-nav__link> Helm Secrets </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../devops/helmfile/ title=Helmfile class=md-nav__link> Helmfile </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-5 type=checkbox id=nav-3-5> <label class=md-nav__link for=nav-3-5> Prometheus </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-3-5> Prometheus </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../devops/prometheus/prometheus/ title=Prometheus class=md-nav__link> Prometheus </a> </li> <li class=md-nav__item> <a href=../../../devops/prometheus/prometheus_architecture/ title=Architecture class=md-nav__link> Architecture </a> </li> <li class=md-nav__item> <a href=../../../devops/prometheus/prometheus_operator/ title="Prometheus Operator" class=md-nav__link> Prometheus Operator </a> </li> <li class=md-nav__item> <a href=../../../devops/prometheus/prometheus_installation/ title="Prometheus Install" class=md-nav__link> Prometheus Install </a> </li> <li class=md-nav__item> <a href=../../../devops/prometheus/alertmanager/ title=AlertManager class=md-nav__link> AlertManager </a> </li> <li class=md-nav__item> <a href=../../../devops/prometheus/blackbox_exporter/ title="Blackbox Exporter" class=md-nav__link> Blackbox Exporter </a> </li> <li class=md-nav__item> <a href=../../../devops/prometheus/node_exporter/ title="Node Exporter" class=md-nav__link> Node Exporter </a> </li> <li class=md-nav__item> <a href=../../../devops/prometheus/prometheus_troubleshooting/ title="Prometheus Troubleshooting" class=md-nav__link> Prometheus Troubleshooting </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-6 type=checkbox id=nav-3-6> <label class=md-nav__link for=nav-3-6> Linux </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-3-6> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/brew/ title=brew class=md-nav__link> brew </a> </li> <li class=md-nav__item> <a href=../../../linux/cookiecutter/ title=cookiecutter class=md-nav__link> cookiecutter </a> </li> <li class=md-nav__item> <a href=../../../linux/elasticsearch/ title=elasticsearch class=md-nav__link> elasticsearch </a> </li> <li class=md-nav__item> <a href=../../../linux/fail2ban/ title=fail2ban class=md-nav__link> fail2ban </a> </li> <li class=md-nav__item> <a href=../../../linux/google_chrome/ title="google chrome" class=md-nav__link> google chrome </a> </li> <li class=md-nav__item> <a href=../../../linux/hypothesis/ title=hypothesis class=md-nav__link> hypothesis </a> </li> <li class=md-nav__item> <a href=../../../linux/luks/luks/ title=LUKS class=md-nav__link> LUKS </a> </li> <li class=md-nav__item> <a href=../../../linux/mkdocs/ title=mkdocs class=md-nav__link> mkdocs </a> </li> <li class=md-nav__item> <a href=../../../linux/monica/ title=monica class=md-nav__link> monica </a> </li> <li class=md-nav__item> <a href=../../../linux/linux_miscellaneous/ title="Miscellaneous Linux Commands" class=md-nav__link> Miscellaneous Linux Commands </a> </li> <li class=md-nav__item> <a href=../../../linux/nodejs/ title=nodejs class=md-nav__link> nodejs </a> </li> <li class=md-nav__item> <a href=../../../linux/rm/ title=rm class=md-nav__link> rm </a> </li> <li class=md-nav__item> <a href=../../../linux/syncthing/ title=Syncthing class=md-nav__link> Syncthing </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-6-14 type=checkbox id=nav-3-6-14> <label class=md-nav__link for=nav-3-6-14> Vim </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-3-6-14> Vim </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/vim/vim_plugins/ title="Vim Plugins" class=md-nav__link> Vim Plugins </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../linux/wireguard/ title=Wireguard class=md-nav__link> Wireguard </a> </li> <li class=md-nav__item> <a href=../../../linux/zip/ title=zip class=md-nav__link> zip </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-7 type=checkbox id=nav-3-7> <label class=md-nav__link for=nav-3-7> AWS </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-3-7> AWS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../devops/aws/aws/ title=AWS class=md-nav__link> AWS </a> </li> <li class=md-nav__item> <a href=../../../devops/aws/security_groups/ title="Security groups workflow" class=md-nav__link> Security groups workflow </a> </li> <li class=md-nav__item> <a href=../../../devops/aws/eks/ title=EKS class=md-nav__link> EKS </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-7-4 type=checkbox id=nav-3-7-4> <label class=md-nav__link for=nav-3-7-4> IAM </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-3-7-4> IAM </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../devops/aws/iam/iam/ title=IAM class=md-nav__link> IAM </a> </li> <li class=md-nav__item> <a href=../../../devops/aws/iam/iam_commands/ title="IAM Commands" class=md-nav__link> IAM Commands </a> </li> <li class=md-nav__item> <a href=../../../devops/aws/iam/iam_debug/ title="IAM Debugging" class=md-nav__link> IAM Debugging </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../devops/aws/s3/ title=S3 class=md-nav__link> S3 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-8 type=checkbox id=nav-3-8> <label class=md-nav__link for=nav-3-8> API Management </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-3-8> API Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../devops/api_management/ title="API Management" class=md-nav__link> API Management </a> </li> <li class=md-nav__item> <a href=../../../devops/kong/kong/ title=Kong class=md-nav__link> Kong </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4 checked> <label class=md-nav__link for=nav-4> Coding </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-4> Coding </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tdd/ title=TDD class=md-nav__link> TDD </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2 type=checkbox id=nav-4-2 checked> <label class=md-nav__link for=nav-4-2> Python </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-4-2> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-1 type=checkbox id=nav-4-2-1> <label class=md-nav__link for=nav-4-2-1> Project Template </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-4-2-1> Project Template </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../python_project_template/ title="Project Template" class=md-nav__link> Project Template </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-1-2 type=checkbox id=nav-4-2-1-2> <label class=md-nav__link for=nav-4-2-1-2> Command-line Project Template </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-2-1-2> Command-line Project Template </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../python_project_template/python_cli_template/ title="Command-line Project Template" class=md-nav__link> Command-line Project Template </a> </li> <li class=md-nav__item> <a href=../python_project_template/python_sqlalchemy_without_flask/ title="Configure SQLAlchemy for projects without flask" class=md-nav__link> Configure SQLAlchemy for projects without flask </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../python_project_template/python_flask_template/ title="Flask Project Template" class=md-nav__link> Flask Project Template </a> </li> <li class=md-nav__item> <a href=../python_project_template/python_microservices_template/ title="Microservices Project Template" class=md-nav__link> Microservices Project Template </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-1-5 type=checkbox id=nav-4-2-1-5> <label class=md-nav__link for=nav-4-2-1-5> Common configurations </label> <nav class=md-nav data-md-component=collapsible data-md-level=4> <label class=md-nav__title for=nav-4-2-1-5> Common configurations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../python_project_template/python_docs/ title="Create the documentation repository" class=md-nav__link> Create the documentation repository </a> </li> <li class=md-nav__item> <a href=../python_ci/ title="Continuous integration pipelines" class=md-nav__link> Continuous integration pipelines </a> </li> <li class=md-nav__item> <a href=../python_config_yaml/ title="Load config from YAML" class=md-nav__link> Load config from YAML </a> </li> <li class=md-nav__item> <a href=../python_project_template/python_sqlalchemy_mariadb/ title="Configure SQLAlchemy to use the MariaDB/Mysql backend" class=md-nav__link> Configure SQLAlchemy to use the MariaDB/Mysql backend </a> </li> <li class=md-nav__item> <a href=../python_project_template/python_docker/ title="Configure Docker to host the application" class=md-nav__link> Configure Docker to host the application </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2-2 type=checkbox id=nav-4-2-2> <label class=md-nav__link for=nav-4-2-2> Libraries </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-4-2-2> Libraries </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../alembic/ title=Alembic class=md-nav__link> Alembic </a> </li> <li class=md-nav__item> <a href=../click/ title=Click class=md-nav__link> Click </a> </li> <li class=md-nav__item> <a href=../deepdiff/ title=DeepDiff class=md-nav__link> DeepDiff </a> </li> <li class=md-nav__item> <a href=../factoryboy/ title=FactoryBoy class=md-nav__link> FactoryBoy </a> </li> <li class=md-nav__item> <a href=../faker/ title=Faker class=md-nav__link> Faker </a> </li> <li class=md-nav__item> <a href=../flask/ title=Flask class=md-nav__link> Flask </a> </li> <li class=md-nav__item> <a href=../folium/ title=Folium class=md-nav__link> Folium </a> </li> <li class=md-nav__item> <a href=../feedparser/ title=Feedparser class=md-nav__link> Feedparser </a> </li> <li class=md-nav__item> <a href=../pandas/ title=Pandas class=md-nav__link> Pandas </a> </li> <li class=md-nav__item> <a href=../pydantic.md title=Pydantic class=md-nav__link> Pydantic </a> </li> <li class=md-nav__item> <a href=../pypika.md title=Pypika class=md-nav__link> Pypika </a> </li> <li class=md-nav__item> <a href=../plotly/ title=Plotly class=md-nav__link> Plotly </a> </li> <li class=md-nav__item> <a href=../ruamel_yaml/ title="Ruamel YAML" class=md-nav__link> Ruamel YAML </a> </li> <li class=md-nav__item> <a href=../sqlalchemy/ title=SQLAlchemy class=md-nav__link> SQLAlchemy </a> </li> <li class=md-nav__item> <a href=../redis-py/ title=Redis-py class=md-nav__link> Redis-py </a> </li> <li class=md-nav__item> <a href=../requests_mock/ title=Requests-mock class=md-nav__link> Requests-mock </a> </li> <li class=md-nav__item> <a href=../rq/ title=Rq class=md-nav__link> Rq </a> </li> <li class=md-nav__item> <a href=../sh/ title=sh class=md-nav__link> sh </a> </li> <li class=md-nav__item> <a href=../tinydb/ title=TinyDB class=md-nav__link> TinyDB </a> </li> <li class=md-nav__item> <a href=../yoyo/ title=Yoyo class=md-nav__link> Yoyo </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../type_hints/ title="Type Hints" class=md-nav__link> Type Hints </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Code Styling </label> <a href=./ title="Code Styling" class="md-nav__link md-nav__link--active"> Code Styling </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#commit-message-guidelines class=md-nav__link> Commit message guidelines </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#revert class=md-nav__link> Revert </a> </li> <li class=md-nav__item> <a href=#type class=md-nav__link> Type </a> </li> <li class=md-nav__item> <a href=#subject class=md-nav__link> Subject </a> </li> <li class=md-nav__item> <a href=#body class=md-nav__link> Body </a> </li> <li class=md-nav__item> <a href=#footer class=md-nav__link> Footer </a> </li> <li class=md-nav__item> <a href=#pre-commit class=md-nav__link> Pre-commit </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#black-code-style class=md-nav__link> Black code style </a> </li> <li class=md-nav__item> <a href=#flake8 class=md-nav__link> Flake8 </a> </li> <li class=md-nav__item> <a href=#type-hints class=md-nav__link> Type hints </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#advantages-and-disadvantages class=md-nav__link> Advantages and disadvantages </a> </li> <li class=md-nav__item> <a href=#usage class=md-nav__link> Usage </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#function-annotations class=md-nav__link> Function annotations </a> </li> <li class=md-nav__item> <a href=#variable-annotations class=md-nav__link> Variable annotations </a> </li> <li class=md-nav__item> <a href=#composite-types class=md-nav__link> Composite types </a> </li> <li class=md-nav__item> <a href=#functions-without-return-values class=md-nav__link> Functions without return values </a> </li> <li class=md-nav__item> <a href=#optional-arguments class=md-nav__link> Optional arguments </a> </li> <li class=md-nav__item> <a href=#allow-any-subclass class=md-nav__link> Allow any subclass </a> </li> <li class=md-nav__item> <a href=#type-aliases class=md-nav__link> Type aliases </a> </li> <li class=md-nav__item> <a href=#specify-the-type-of-the-class-in-its-method-and-attributes class=md-nav__link> Specify the type of the class in it's method and attributes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-mypy-with-an-existing-codebase class=md-nav__link> Using mypy with an existing codebase </a> </li> <li class=md-nav__item> <a href=#reveal-the-type-of-an-expression class=md-nav__link> Reveal the type of an expression </a> </li> <li class=md-nav__item> <a href=#solve-cyclic-imports-due-to-typing class=md-nav__link> Solve cyclic imports due to typing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#f-strings class=md-nav__link> f-strings </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#arbitrary-expressions class=md-nav__link> Arbitrary expressions </a> </li> <li class=md-nav__item> <a href=#multiline-f-strings class=md-nav__link> Multiline f-strings </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#reference class=md-nav__link> Reference </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#type-hints_1 class=md-nav__link> Type hints </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../python_anti_patterns/ title=Anti-Patterns class=md-nav__link> Anti-Patterns </a> </li> <li class=md-nav__item> <a href=../data_classes/ title="Data Classes" class=md-nav__link> Data Classes </a> </li> <li class=md-nav__item> <a href=../pytest/ title=Pytest class=md-nav__link> Pytest </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../javascript/javascript/ title=Javascript class=md-nav__link> Javascript </a> </li> <li class=md-nav__item> <a href=../../json/json/ title=JSON class=md-nav__link> JSON </a> </li> <li class=md-nav__item> <a href=../../react/react/ title=React class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../sql/sql/ title=SQL class=md-nav__link> SQL </a> </li> <li class=md-nav__item> <a href=../../yaml/yaml/ title=YAML class=md-nav__link> YAML </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Software Architecture </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-5> Software Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../architecture/solid/ title=SOLID class=md-nav__link> SOLID </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2 type=checkbox id=nav-5-2> <label class=md-nav__link for=nav-5-2> Domain Driven Design </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-2> Domain Driven Design </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../architecture/domain_driven_design/ title="Domain Driven Design" class=md-nav__link> Domain Driven Design </a> </li> <li class=md-nav__item> <a href=../../../architecture/repository_pattern/ title="Repository Pattern" class=md-nav__link> Repository Pattern </a> </li> <li class=md-nav__item> <a href=../../../architecture/service_layer_pattern/ title="Service Layer Pattern" class=md-nav__link> Service Layer Pattern </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../architecture/database_architecture/ title="Database Architecture" class=md-nav__link> Database Architecture </a> </li> <li class=md-nav__item> <a href=../../../architecture/orm_builder_query_or_raw_sql/ title="ORM, Query Builder or Raw SQL" class=md-nav__link> ORM, Query Builder or Raw SQL </a> </li> <li class=md-nav__item> <a href=../../../architecture/microservices/ title=Microservices class=md-nav__link> Microservices </a> </li> <li class=md-nav__item> <a href=../../../architecture/restful_apis/ title="Restful APIS" class=md-nav__link> Restful APIS </a> </li> <li class=md-nav__item> <a href=../../../architecture/redis/ title=Redis class=md-nav__link> Redis </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Data Analysis </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-6> Data Analysis </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-1 type=checkbox id=nav-6-1> <label class=md-nav__link for=nav-6-1> Recommender Systems </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-1> Recommender Systems </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../data_analysis/recommender_systems/recommender_systems/ title="Recommender Systems" class=md-nav__link> Recommender Systems </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7 type=checkbox id=nav-7> <label class=md-nav__link for=nav-7> Life Automation </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-7> Life Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../life_automation/life_automation/ title="Life Automation" class=md-nav__link> Life Automation </a> </li> <li class=md-nav__item> <a href=../../../life_automation/week_automation/ title="Week Automation" class=md-nav__link> Week Automation </a> </li> <li class=md-nav__item> <a href=../../../life_automation/relationship_automation/ title="Relationship Automation" class=md-nav__link> Relationship Automation </a> </li> <li class=md-nav__item> <a href=../../../life_automation/vim_automation/ title="Vim Automation" class=md-nav__link> Vim Automation </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8 type=checkbox id=nav-8> <label class=md-nav__link for=nav-8> Arts </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-8> Arts </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-1 type=checkbox id=nav-8-1> <label class=md-nav__link for=nav-8-1> Writing </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-1> Writing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../writing/orthography/ title="English Grammar and Ortography" class=md-nav__link> English Grammar and Ortography </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-2 type=checkbox id=nav-8-2> <label class=md-nav__link for=nav-8-2> Dancing </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-2> Dancing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../dancing/rave_dances/ title="Rave Dances" class=md-nav__link> Rave Dances </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-2-2 type=checkbox id=nav-8-2-2> <label class=md-nav__link for=nav-8-2-2> Shuffle </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-8-2-2> Shuffle </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../dancing/shuffle_basics/ title=Basics class=md-nav__link> Basics </a> </li> <li class=md-nav__item> <a href=../../../dancing/shuffle_kicks/ title=Kicks class=md-nav__link> Kicks </a> </li> <li class=md-nav__item> <a href=../../../dancing/shuffle_spins/ title=Spins class=md-nav__link> Spins </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../dancing/cutting_shapes_basics/ title="Cutting Shapes" class=md-nav__link> Cutting Shapes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-3 type=checkbox id=nav-8-3> <label class=md-nav__link for=nav-8-3> Drawing </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-3> Drawing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drawing/drawing/ title=Drawing class=md-nav__link> Drawing </a> </li> <li class=md-nav__item> <a href=../../../drawing/exercise_pool/ title="Exercise Pool" class=md-nav__link> Exercise Pool </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-9 type=checkbox id=nav-9> <label class=md-nav__link for=nav-9> Psychology </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-9> Psychology </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../psychology/the_xy_problem/ title="The XY Problem" class=md-nav__link> The XY Problem </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-10 type=checkbox id=nav-10> <label class=md-nav__link for=nav-10> Botany </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-10> Botany </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../botany/trees/ title=Trees class=md-nav__link> Trees </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../emojis/ title=Emojis class=md-nav__link> Emojis </a> </li> <li class=md-nav__item> <a href=../../../contact/ title=Contact class=md-nav__link> Contact </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#commit-message-guidelines class=md-nav__link> Commit message guidelines </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#revert class=md-nav__link> Revert </a> </li> <li class=md-nav__item> <a href=#type class=md-nav__link> Type </a> </li> <li class=md-nav__item> <a href=#subject class=md-nav__link> Subject </a> </li> <li class=md-nav__item> <a href=#body class=md-nav__link> Body </a> </li> <li class=md-nav__item> <a href=#footer class=md-nav__link> Footer </a> </li> <li class=md-nav__item> <a href=#pre-commit class=md-nav__link> Pre-commit </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#black-code-style class=md-nav__link> Black code style </a> </li> <li class=md-nav__item> <a href=#flake8 class=md-nav__link> Flake8 </a> </li> <li class=md-nav__item> <a href=#type-hints class=md-nav__link> Type hints </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#advantages-and-disadvantages class=md-nav__link> Advantages and disadvantages </a> </li> <li class=md-nav__item> <a href=#usage class=md-nav__link> Usage </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#function-annotations class=md-nav__link> Function annotations </a> </li> <li class=md-nav__item> <a href=#variable-annotations class=md-nav__link> Variable annotations </a> </li> <li class=md-nav__item> <a href=#composite-types class=md-nav__link> Composite types </a> </li> <li class=md-nav__item> <a href=#functions-without-return-values class=md-nav__link> Functions without return values </a> </li> <li class=md-nav__item> <a href=#optional-arguments class=md-nav__link> Optional arguments </a> </li> <li class=md-nav__item> <a href=#allow-any-subclass class=md-nav__link> Allow any subclass </a> </li> <li class=md-nav__item> <a href=#type-aliases class=md-nav__link> Type aliases </a> </li> <li class=md-nav__item> <a href=#specify-the-type-of-the-class-in-its-method-and-attributes class=md-nav__link> Specify the type of the class in it's method and attributes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-mypy-with-an-existing-codebase class=md-nav__link> Using mypy with an existing codebase </a> </li> <li class=md-nav__item> <a href=#reveal-the-type-of-an-expression class=md-nav__link> Reveal the type of an expression </a> </li> <li class=md-nav__item> <a href=#solve-cyclic-imports-due-to-typing class=md-nav__link> Solve cyclic imports due to typing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#f-strings class=md-nav__link> f-strings </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#arbitrary-expressions class=md-nav__link> Arbitrary expressions </a> </li> <li class=md-nav__item> <a href=#multiline-f-strings class=md-nav__link> Multiline f-strings </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#reference class=md-nav__link> Reference </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#type-hints_1 class=md-nav__link> Type hints </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/lyz-code/blue-book/edit/master/docs/coding/python/python_code_styling.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1>Code Styling</h1> <h2 id=commit-message-guidelines><a href=https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines>Commit message guidelines</a><a class=headerlink href=#commit-message-guidelines title="Permanent link">&para;</a></h2> <p>I'm following the Angular commit convention that is backed up by <a href=https://python-semantic-release.readthedocs.io/en/latest/commit-log-parsing.html>python-semantic-release</a>, with the idea of implementing automatic <a href=https://semver.org/ >semantic versioning</a> sometime in the future.</p> <p>Each commit message consists of a header, a body and a footer. The header has a defined format that includes a type, a scope and a subject:</p> <div class=highlight><pre><span></span><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;
&lt;BLANK LINE&gt;
&lt;body&gt;
&lt;BLANK LINE&gt;
&lt;footer&gt;
</code></pre></div> <p>The <em>header</em> is mandatory and the <em>scope</em> of the header is optional.</p> <p>Any line of the commit message cannot be longer 100 characters.</p> <p>The <em>footer</em> should contain a <a href=https://help.github.com/articles/closing-issues-via-commit-messages/ >closing reference to an issue</a> if any.</p> <p>Samples: (even more samples)</p> <div class=highlight><pre><span></span><code>docs(changelog): update changelog to beta.5

fix(release): need to depend on latest rxjs and zone.js

The version in our package.json gets copied to the one we publish, and users need the latest of these.

docs(router): fix typo &#39;containa&#39; to &#39;contains&#39; (#36764)

Closes #36763

PR Close #36764
</code></pre></div> <h3 id=revert>Revert<a class=headerlink href=#revert title="Permanent link">&para;</a></h3> <p>If the commit reverts a previous commit, it should begin with <code>revert:</code> , followed by the header of the reverted commit. In the body it should say: <code>This reverts commit &lt;hash&gt;.</code>, where the hash is the SHA of the commit to revert.</p> <h3 id=type>Type<a class=headerlink href=#type title="Permanent link">&para;</a></h3> <p>Must be one of the following:</p> <ul> <li><code>build</code>: Changes that affect the build system or external dependencies.</li> <li><code>ci</code>: Changes to our CI configuration files and scripts.</li> <li><code>docs</code>: Documentation changes.</li> <li><code>feat</code>: A new feature.</li> <li><code>fix</code>: A bug fix.</li> <li><code>perf</code>: A code change that improves performance.</li> <li><code>refactor</code>: A code change that neither fixes a bug nor adds a feature.</li> <li><code>style</code>: Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc).</li> <li><code>test</code>: Adding missing tests or correcting existing tests.</li> </ul> <h3 id=subject>Subject<a class=headerlink href=#subject title="Permanent link">&para;</a></h3> <p>The subject contains a succinct description of the change:</p> <ul> <li>Use the imperative, present tense: "change" not "changed" nor "changes".</li> <li>Don't capitalize the first letter.</li> <li>No dot (.) at the end.</li> </ul> <h3 id=body>Body<a class=headerlink href=#body title="Permanent link">&para;</a></h3> <p>Same as in the subject, use the imperative, present tense: "change" not "changed" nor "changes". The body should include the motivation for the change and contrast this with previous behavior.</p> <h3 id=footer>Footer<a class=headerlink href=#footer title="Permanent link">&para;</a></h3> <p>The footer should contain any information about Breaking Changes and is also the place to reference issues that this commit Closes.</p> <p>Breaking Changes should start with the word <code>BREAKING CHANGE:</code> with a space or two newlines. The rest of the commit message is then used for this.</p> <h3 id=pre-commit>Pre-commit<a class=headerlink href=#pre-commit title="Permanent link">&para;</a></h3> <p>To ensure that your project follows these guidelines, add the following to your <a href=../python_ci/ >pre-commit configuration</a>:</p> <div class="admonition note"> <p class=admonition-title>File: .pre-commit-config.yaml</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>repo</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">https://github.com/commitizen-tools/commitizen</span>
  <span class=nt>rev</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">master</span>
  <span class=nt>hooks</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>id</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">commitizen</span>
      <span class=nt>stages</span><span class=p>:</span> <span class="p p-Indicator">[</span><span class=nv>commit-msg</span><span class="p p-Indicator">]</span>
</code></pre></div> </div> <p>To make your life easier, change your workflow to use <a href=https://commitizen-tools.github.io/commitizen/ >commitizen</a>.</p> <p>In Vim, if you're using Vim fugitive <a href=https://vi.stackexchange.com/questions/3670/how-to-enter-insert-mode-when-entering-neovim-terminal-pane>change the configuration</a> to:</p> <div class=highlight><pre><span></span><code>nnoremap &lt;leader&gt;gc :terminal cz c&lt;CR&gt;
nnoremap &lt;leader&gt;gr :terminal cz c --retry&lt;CR&gt;

&quot; Open terminal mode in insert mode
if has(&#39;nvim&#39;)
    autocmd TermOpen term://* startinsert
endif
autocmd BufLeave term://* stopinsert
</code></pre></div> <p>If some pre-commit hook fails, make the changes and then use <code>&lt;leader&gt;gr</code> to repeat the same commit message.</p> <p>To automatically generate the changelog use <code>cz bump --changelog --no-verify</code>. The <code>--no-verify</code> part is required <a href=https://github.com/commitizen-tools/commitizen/issues/164>if you use pre-commit hooks</a>.</p> <p>Whenever you want to release <code>1.0.0</code>, use <code>cz bump --changelog --no-verify --increment MAJOR</code>.</p> <h2 id=black-code-style><a href=https://black.readthedocs.io>Black code style</a><a class=headerlink href=#black-code-style title="Permanent link">&para;</a></h2> <p><a href=../python_ci/#black>Black</a> is a style guide enforcement tool.</p> <h2 id=flake8><a href=https://flake8.pycqa.org/ >Flake8</a><a class=headerlink href=#flake8 title="Permanent link">&para;</a></h2> <p><a href=../python_ci/#flake8>Flake8</a> is another style guide enforcement tool.</p> <h2 id=type-hints><a href=https://realpython.com/python-type-checking/#type-systems>Type hints</a><a class=headerlink href=#type-hints title="Permanent link">&para;</a></h2> <p>Traditionally, the Python interpreter handles types in a flexible but implicit way. Recent versions of Python allow you to specify explicit type hints that different tools can use to help you develop your code more efficiently.</p> <div class="admonition note"> <p class=admonition-title>TL;DR</p> <p><a href=https://www.bernat.tech/the-state-of-type-hints-in-python/ >Use Type hints whenever unit tests are worth writing</a></p> </div> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>headline</span><span class=p>(</span><span class=n>text</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>align</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
    <span class=k>if</span> <span class=n>align</span><span class=p>:</span>
        <span class=k>return</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>text</span><span class=o>.</span><span class=n>title</span><span class=p>()</span><span class=si>}</span><span class=se>\n</span><span class=si>{</span><span class=s1>&#39;-&#39;</span> <span class=o>*</span> <span class=nb>len</span><span class=p>(</span><span class=n>text</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=sa>f</span><span class=s2>&quot; </span><span class=si>{</span><span class=n>text</span><span class=o>.</span><span class=n>title</span><span class=p>()</span><span class=si>}</span><span class=s2> &quot;</span><span class=o>.</span><span class=n>center</span><span class=p>(</span><span class=mi>50</span><span class=p>,</span> <span class=s2>&quot;o&quot;</span><span class=p>)</span>
</code></pre></div> <p>Type hints are not enforced on their own by python. So you won't catch an error if you try to run <code>headline("use mypy", align="center")</code> unless you use a static type checker like <a href=http://mypy-lang.org/ >Mypy</a>.</p> <h3 id=advantages-and-disadvantages>Advantages and disadvantages<a class=headerlink href=#advantages-and-disadvantages title="Permanent link">&para;</a></h3> <p>Advantages:</p> <ul> <li>Help <strong>catch certain errors</strong> if used with a static type checker.</li> <li>Help <strong>check your code</strong>. It's not trivial to use docstrings to do automatic checks.</li> <li>Help to reason about code: Knowing the parameters type makes it a lot easier to understand and maintain a code base. It can speed up the time required to catch up with a code snippet. Always remember that you read code a lot more often than you write it, so you should optimize for ease of reading.</li> <li> <p>Help you <strong>build and maintain a cleaner architecture</strong>. The act of writing type hints force you to think about the types in your program.</p> </li> <li> <p>Helps refactoring: Type hints make it trivial to find where a given class is used when you're trying to refactor your code base.</p> </li> <li>Improve IDEs and linters.</li> </ul> <p>Cons:</p> <ul> <li>Type hints <strong>take developer time and effort to add</strong>. Even though it probably pays off in spending less time debugging, you will spend more time entering code.</li> <li><strong>Introduce a slight penalty in start-up time</strong>. If you need to use the typing module, the import time may be significant, even more in short scripts.</li> <li>Work best in modern Pythons.</li> </ul> <p>Follow these guidelines when deciding if you want to add types to your project:</p> <ul> <li>In libraries that will be used by others, they add a lot of value.</li> <li>In complex projects, type hints help you understand how types flow through your code and are highly recommended.</li> <li>If you are beginning to learn Python, don't use them yet.</li> <li>If you are writing throw-away scripts, don't use them.</li> </ul> <p>So, <a href=https://www.bernat.tech/the-state-of-type-hints-in-python/ >Use Type hints whenever unit tests are worth writing</a>.</p> <h3 id=usage>Usage<a class=headerlink href=#usage title="Permanent link">&para;</a></h3> <h4 id=function-annotations>Function annotations<a class=headerlink href=#function-annotations title="Permanent link">&para;</a></h4> <p><div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>func</span><span class=p>(</span><span class=n>arg</span><span class=p>:</span> <span class=n>arg_type</span><span class=p>,</span> <span class=n>optarg</span><span class=p>:</span> <span class=n>arg_type</span> <span class=o>=</span> <span class=n>default</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>return_type</span><span class=p>:</span>
    <span class=o>...</span>
</code></pre></div> For arguments the syntax is <code>argument: annotation</code>, while the return type is annotated using <code>-&gt; annotation</code>. Note that the annotation must be a valid Python expression.</p> <p>When running the code, the special <code>.__annotations__</code> attribute on the function stores the typing information.</p> <h4 id=variable-annotations>Variable annotations<a class=headerlink href=#variable-annotations title="Permanent link">&para;</a></h4> <p>Sometimes the type checker needs help in figuring out the types of variables as well. The syntax is similar:</p> <div class=highlight><pre><span></span><code><span class=n>pi</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>3.142</span>

<span class=k>def</span> <span class=nf>circumference</span><span class=p>(</span><span class=n>radius</span><span class=p>:</span> <span class=nb>float</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
    <span class=k>return</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>pi</span> <span class=o>*</span> <span class=n>radius</span>
</code></pre></div> <h4 id=composite-types>Composite types<a class=headerlink href=#composite-types title="Permanent link">&para;</a></h4> <p>If you need to hint other types than <code>str</code>, <code>float</code> and <code>bool</code>, you'll need to import the <code>typing</code> module.</p> <p>For example to define the hint types of list, dictionaries and tuples:</p> <p><div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>List</span><span class=p>,</span> <span class=n>Tuple</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>names</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;Guido&quot;</span><span class=p>,</span> <span class=s2>&quot;Jukka&quot;</span><span class=p>,</span> <span class=s2>&quot;Ivan&quot;</span><span class=p>]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>version</span><span class=p>:</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>int</span><span class=p>,</span> <span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>options</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;centered&quot;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=s2>&quot;capitalize&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>}</span>
</code></pre></div> If your function expects some kind of sequence but don't care whether it's a list or a tuple, use the <code>typing.Sequence</code> object.</p> <h4 id=functions-without-return-values>Functions without return values<a class=headerlink href=#functions-without-return-values title="Permanent link">&para;</a></h4> <p>Some functions aren't meant to return anything. Use the <code>-&gt; None</code> hint in these cases.</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=n>player_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>

    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>player_name</span><span class=si>}</span><span class=s2> plays&quot;</span><span class=p>)</span>


<span class=n>ret_val</span> <span class=o>=</span> <span class=n>play</span><span class=p>(</span><span class=s2>&quot;Filip&quot;</span><span class=p>)</span>
</code></pre></div> <p>The annotation help catch the kinds of subtle bugs where you are trying to use a meaningless return value.</p> <p>If your function doesn't return any object, use the <code>NoReturn</code> type.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>This is the first iteration of the synoptical reading of the full <a href=https://realpython.com/python-type-checking/#type-systems>Real python article on type checking</a>.</p> </div> <h4 id=optional-arguments>Optional arguments<a class=headerlink href=#optional-arguments title="Permanent link">&para;</a></h4> <p>A common pattern is to use <code>None</code> as a default value for an argument. This is done either to avoid problems with <a href=../python_anti_patterns/#mutable-default-arguments>mutable default values</a> or to have a sentinel value flagging special behavior.</p> <p>This creates a challenge for type hinting as the argument may be of type string (for example) but it can also be <code>None</code>. We use the <code>Optional</code> type to address this case.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Optional</span>

<span class=k>def</span> <span class=nf>player</span><span class=p>(</span><span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>start</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
    <span class=o>...</span>
</code></pre></div> <p>A similar way would be to use <code>Union[None, str]</code>.</p> <h4 id=allow-any-subclass><a href=https://mypy.readthedocs.io/en/stable/kinds_of_types.html#union-types>Allow any subclass</a><a class=headerlink href=#allow-any-subclass title="Permanent link">&para;</a></h4> <p>It's not yet supported (unless inheriting from an abstract class), so the expected format</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>A</span><span class=p>:</span>
    <span class=k>pass</span>

<span class=k>class</span> <span class=nc>B</span><span class=p>(</span><span class=n>A</span><span class=p>):</span>
    <span class=k>pass</span>

<span class=k>def</span> <span class=nf>process_any_subclass_type_of_A</span><span class=p>(</span><span class=bp>cls</span><span class=p>:</span> <span class=n>A</span><span class=p>):</span>
    <span class=k>pass</span>

<span class=n>process_any_subclass_type_of_A</span><span class=p>(</span><span class=n>B</span><span class=p>)</span>
</code></pre></div> <p>Will fail with <code>error: Argument 1 to "process_any_subclass_type_of_A" has incompatible type "Type[B]"; expected "A"</code>.</p> <p>The solution is to use the <code>Union</code> operator:</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>A</span><span class=p>:</span>
    <span class=k>pass</span>

<span class=k>class</span> <span class=nc>B</span><span class=p>(</span><span class=n>A</span><span class=p>):</span>
    <span class=k>pass</span>

<span class=k>class</span> <span class=nc>C</span><span class=p>(</span><span class=n>A</span><span class=p>):</span>
    <span class=k>pass</span>

<span class=k>def</span> <span class=nf>process_any_subclass_type_of_A</span><span class=p>(</span><span class=bp>cls</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=n>B</span><span class=p>,</span><span class=n>C</span><span class=p>]):</span>
    <span class=k>pass</span>
</code></pre></div> <p>The following works:</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>A</span><span class=p>(</span><span class=n>abc</span><span class=o>.</span><span class=n>ABC</span><span class=p>):</span>
    <span class=nd>@abc</span><span class=o>.</span><span class=n>abstractmethod</span>
    <span class=k>def</span> <span class=nf>add</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>raise</span> <span class=ne>NotImplementedError</span>
<span class=k>class</span> <span class=nc>B</span><span class=p>(</span><span class=n>A</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>add</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>pass</span>

<span class=k>class</span> <span class=nc>C</span><span class=p>(</span><span class=n>A</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>add</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>pass</span>

<span class=k>def</span> <span class=nf>process_any_subclass_type_of_A</span><span class=p>(</span><span class=bp>cls</span><span class=p>:</span> <span class=n>A</span><span class=p>):</span>
    <span class=k>pass</span>
</code></pre></div> <h4 id=type-aliases>Type aliases<a class=headerlink href=#type-aliases title="Permanent link">&para;</a></h4> <p>Type hints might become oblique when working with nested types. If it's the case, save them into a new variable, and use that instead.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Tuple</span>

<span class=n>Card</span> <span class=o>=</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span>
<span class=n>Deck</span> <span class=o>=</span> <span class=n>List</span><span class=p>[</span><span class=n>Card</span><span class=p>]</span>

<span class=k>def</span> <span class=nf>deal_hands</span><span class=p>(</span><span class=n>deck</span><span class=p>:</span> <span class=n>Deck</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>Deck</span><span class=p>,</span> <span class=n>Deck</span><span class=p>,</span> <span class=n>Deck</span><span class=p>,</span> <span class=n>Deck</span><span class=p>]:</span>

    <span class=sd>&quot;&quot;&quot;Deal the cards in the deck into four hands&quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=p>(</span><span class=n>deck</span><span class=p>[</span><span class=mi>0</span><span class=p>::</span><span class=mi>4</span><span class=p>],</span> <span class=n>deck</span><span class=p>[</span><span class=mi>1</span><span class=p>::</span><span class=mi>4</span><span class=p>],</span> <span class=n>deck</span><span class=p>[</span><span class=mi>2</span><span class=p>::</span><span class=mi>4</span><span class=p>],</span> <span class=n>deck</span><span class=p>[</span><span class=mi>3</span><span class=p>::</span><span class=mi>4</span><span class=p>])</span>
</code></pre></div> <p>This can be useful when you need lists of subclasses or optional list of subclasses. The expected behavior doesn't work.</p> <div class=highlight><pre><span></span><code><span class=n>Entity</span> <span class=o>=</span> <span class=n>TypeVar</span><span class=p>(</span><span class=s1>&#39;Entity&#39;</span><span class=p>,</span> <span class=n>model</span><span class=o>.</span><span class=n>Project</span><span class=p>,</span> <span class=n>model</span><span class=o>.</span><span class=n>Tag</span><span class=p>,</span> <span class=n>model</span><span class=o>.</span><span class=n>Task</span><span class=p>)</span>
<span class=n>Entities</span> <span class=o>=</span> <span class=n>List</span><span class=p>[</span><span class=n>Entity</span><span class=p>]</span>
</code></pre></div> <p>Try to use <code>TypeVar</code> instead of <code>Union</code> of the different types, as it's able to deduce better the type of the return value of a function.</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>do_something</span><span class=p>(</span><span class=n>entity</span><span class=p>:</span> <span class=n>Entity</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Entity</span><span class=p>:</span>
    <span class=k>return</span> <span class=n>Entity</span>
</code></pre></div> <p>If you use <code>TypeVar</code>, if you call the function with a type <code>Card</code>, it will know that the result is of type <code>Card</code>, if you use <code>Union</code>, even if you call it with <code>Card</code> the return value will be <code>Union[Card,Deck]</code>.</p> <h4 id=specify-the-type-of-the-class-in-its-method-and-attributes><a href=https://stackoverflow.com/questions/33533148/how-do-i-specify-that-the-return-type-of-a-method-is-the-same-as-the-class-itsel>Specify the type of the class in it's method and attributes</a><a class=headerlink href=#specify-the-type-of-the-class-in-its-method-and-attributes title="Permanent link">&para;</a></h4> <p>If you are using Python 3.10 or later, it just works. Python 3.7 introduces PEP 563: postponed evaluation of annotations. A module that uses the future statement <code>from __future__ import annotations</code> to store annotations as strings automatically:</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>__future__</span> <span class=kn>import</span> <span class=n>annotations</span>

<span class=k>class</span> <span class=nc>Position</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__add__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=n>Position</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Position</span><span class=p>:</span>
        <span class=o>...</span>
</code></pre></div> <p>But <code>pyflakes</code> will still complain, so I've used strings.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>__future__</span> <span class=kn>import</span> <span class=n>annotations</span>

<span class=k>class</span> <span class=nc>Position</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__add__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=s1>&#39;Position&#39;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s1>&#39;Position&#39;</span><span class=p>:</span>
        <span class=o>...</span>
</code></pre></div> <h3 id=using-mypy-with-an-existing-codebase><a href=https://mypy.readthedocs.io/en/latest/existing_code.html>Using mypy with an existing codebase</a><a class=headerlink href=#using-mypy-with-an-existing-codebase title="Permanent link">&para;</a></h3> <p>These steps will get you started with <code>mypy</code> on an existing codebase:</p> <ul> <li> <p><a href=https://mypy.readthedocs.io/en/latest/existing_code.html#start-small>Start small</a>: Pick a subset of your codebase to run mypy on, without any annotations.</p> <p>You’ll probably need to fix some mypy errors, either by inserting annotations requested by mypy or by adding <code># type: ignore</code> comments to silence errors you don’t want to fix now.</p> <p>Get a clean mypy build for some files, with some annotations. * <a href=https://mypy.readthedocs.io/en/latest/existing_code.html#mypy-runner-script>Write a mypy runner script</a> to ensure consistent results. Here are some steps you may want to do in the script: * Ensure that you install the correct version of mypy. * Specify mypy config file or command-line options. * Provide set of files to type check. You may want to configure the inclusion and exclusion filters for full control of the file list. * <a href=../python_ci/#mypy>Run mypy in Continuous Integration to prevent type errors</a>:</p> <p>Once you have a clean mypy run and a runner script for a part of your codebase, set up your Continuous Integration (CI) system to run mypy to ensure that developers won’t introduce bad annotations. A small CI script could look something like this:</p> <p><div class=highlight><pre><span></span><code><span class=n>python3</span> <span class=o>-</span><span class=n>m</span> <span class=n>pip</span> <span class=n>install</span> <span class=n>mypy</span><span class=o>==</span><span class=mf>0.600</span>  <span class=c1># Pinned version avoids surprises</span>
<span class=n>scripts</span><span class=o>/</span><span class=n>mypy</span>  <span class=c1># Runs with the correct options</span>
</code></pre></div> * Gradually annotate commonly imported modules: Most projects have some widely imported modules, such as utilities or model classes. It’s a good idea to annotate these soon, since this allows code using these modules to be type checked more effectively. Since mypy supports gradual typing, it’s okay to leave some of these modules unannotated. The more you annotate, the more useful mypy will be, but even a little annotation coverage is useful. * Write annotations as you change existing code and write new code: Now you are ready to include type annotations in your development workflows. Consider adding something like these in your code style conventions:</p> <ul> <li>Developers should add annotations for any new code.</li> <li>It’s also encouraged to write annotations when you change existing code.</li> </ul> </li> </ul> <h3 id=reveal-the-type-of-an-expression><a href="https://mypy.readthedocs.io/en/stable/common_issues.html?highlight=get%20type%20of%20object#displaying-the-type-of-an-expression">Reveal the type of an expression</a><a class=headerlink href=#reveal-the-type-of-an-expression title="Permanent link">&para;</a></h3> <p>You can use <code>reveal_type(expr)</code> to ask mypy to display the inferred static type of an expression. This can be useful when you don't quite understand how mypy handles a particular piece of code. Example:</p> <div class=highlight><pre><span></span><code><span class=n>reveal_type</span><span class=p>((</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;hello&#39;</span><span class=p>))</span>  <span class=c1># Revealed type is &#39;Tuple[builtins.int, builtins.str]&#39;</span>
</code></pre></div> <p>You can also use <code>reveal_locals()</code> at any line in a file to see the types of all local variables at once. Example:</p> <div class=highlight><pre><span></span><code><span class=n>a</span> <span class=o>=</span> <span class=mi>1</span>
<span class=n>b</span> <span class=o>=</span> <span class=s1>&#39;one&#39;</span>
<span class=n>reveal_locals</span><span class=p>()</span>
<span class=c1># Revealed local types are:</span>
<span class=c1>#     a: builtins.int</span>
<span class=c1>#     b: builtins.str</span>
</code></pre></div> <p><code>reveal_type</code> and <code>reveal_locals</code> are only understood by mypy and don't exist in Python. If you try to run your program, you’ll have to remove any <code>reveal_type</code> and <code>reveal_locals</code> calls before you can run your code. Both are always available and you don't need to import them.</p> <h3 id=solve-cyclic-imports-due-to-typing><a href=https://www.stefaanlippens.net/circular-imports-type-hints-python.html>Solve cyclic imports due to typing</a><a class=headerlink href=#solve-cyclic-imports-due-to-typing title="Permanent link">&para;</a></h3> <p>You can use a conditional import that is only active in "type hinting mode", but doesn't interfere at run time. The <code>typing.TYPE_CHECKING</code> constant makes this easily possible. For example:</p> <div class=highlight><pre><span></span><code><span class=c1># thing.py</span>
<span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>TYPE_CHECKING</span>
<span class=k>if</span> <span class=n>TYPE_CHECKING</span><span class=p>:</span>
    <span class=kn>from</span> <span class=nn>connection</span> <span class=kn>import</span> <span class=n>ApiConnection</span>

<span class=k>class</span> <span class=nc>Thing</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>connection</span><span class=p>:</span> <span class=s1>&#39;ApiConnection&#39;</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_conn</span> <span class=o>=</span> <span class=n>connection</span>
</code></pre></div> <p>The code will now execute properly as there is no circular import issue anymore. Type hinting tools on the other hand should still be able to resolve the <code>ApiConnection</code> type hint in <code>Thing.__init__</code>.</p> <h2 id=f-strings>f-strings<a class=headerlink href=#f-strings title="Permanent link">&para;</a></h2> <p><a href=https://realpython.com/python-f-strings/ >f-strings</a>, also known as <em>formatted string literals</em>, are strings that have an <code>f</code> at the beginning and curly braces containing expressions that will be replaced with their values.</p> <p>Introduced in Python 3.6, they are more readable, concise, and less prone to error than other ways of formatting, as well as faster.</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>name</span> <span class=o>=</span> <span class=s2>&quot;Eric&quot;</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>age</span> <span class=o>=</span> <span class=mi>74</span>
<span class=o>&gt;&gt;&gt;</span> <span class=sa>f</span><span class=s2>&quot;Hello, </span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>. You are </span><span class=si>{</span><span class=n>age</span><span class=si>}</span><span class=s2>.&quot;</span>
<span class=s1>&#39;Hello, Eric. You are 74.&#39;</span>
</code></pre></div> <h3 id=arbitrary-expressions>Arbitrary expressions<a class=headerlink href=#arbitrary-expressions title="Permanent link">&para;</a></h3> <p>Because f-strings are evaluated at runtime, you can put any valid Python expressions in them. For example, calling a function or method from within.</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>name</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span><span class=si>}</span><span class=s2> is funny.&quot;</span>
<span class=s1>&#39;eric idle is funny.&#39;</span>
</code></pre></div> <h3 id=multiline-f-strings>Multiline f-strings<a class=headerlink href=#multiline-f-strings title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>name</span> <span class=o>=</span> <span class=s2>&quot;Eric&quot;</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>profession</span> <span class=o>=</span> <span class=s2>&quot;comedian&quot;</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>affiliation</span> <span class=o>=</span> <span class=s2>&quot;Monty Python&quot;</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>message</span> <span class=o>=</span> <span class=p>(</span>
<span class=o>...</span>     <span class=sa>f</span><span class=s2>&quot;Hi </span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>. &quot;</span>
<span class=o>...</span>     <span class=sa>f</span><span class=s2>&quot;You are a </span><span class=si>{</span><span class=n>profession</span><span class=si>}</span><span class=s2>. &quot;</span>
<span class=o>...</span>     <span class=sa>f</span><span class=s2>&quot;You were in </span><span class=si>{</span><span class=n>affiliation</span><span class=si>}</span><span class=s2>.&quot;</span>
<span class=o>...</span> <span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>message</span>
<span class=s1>&#39;Hi Eric. You are a comedian. You were in Monty Python.&#39;</span>
</code></pre></div> <h2 id=reference>Reference<a class=headerlink href=#reference title="Permanent link">&para;</a></h2> <h3 id=type-hints_1>Type hints<a class=headerlink href=#type-hints_1 title="Permanent link">&para;</a></h3> <ul> <li><a href=https://www.bernat.tech/the-state-of-type-hints-in-python/ >Bernat gabor article on the state of type hints in python</a></li> <li><a href=https://realpython.com/python-type-checking/#type-systems>Real python article on type checking</a></li> </ul> <hr> <div class=md-source-date> <small> Last update: <span class=timeago datetime=1601482139000 locale=en></span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../type_hints/ title="Type Hints" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Previous </span> Type Hints </span> </div> </a> <a href=../python_anti_patterns/ title=Anti-Patterns class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Next </span> Anti-Patterns </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> powered by <a href=https://www.mkdocs.org target=_blank rel=noopener>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs</a> </div> <div class=md-footer-social> <link rel=stylesheet href=../../../assets/fonts/font-awesome.css> <a href=https://github.com/lyz-code target=_blank rel=noopener title class="md-footer-social__link fa fa-"></a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/application.c33a9706.js></script> <script>app.initialize({version:"1.1",url:{base:"../../.."}})</script> <script src=https://cdnjs.cloudflare.com/ajax/libs/timeago.js/4.0.0-beta.2/timeago.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/timeago.js/4.0.0-beta.2/timeago.locales.min.js></script> <script>
            const nodes = document.querySelectorAll('.timeago');
            const locale = nodes[0].getAttribute('locale');
            timeago.render(nodes, locale);
          </script> </body> </html>