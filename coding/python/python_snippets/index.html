<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="My personal digital garden"><meta name=author content=Lyz><link href=https://lyz-code.github.io/blue-book/coding/python/python_snippets/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-8.1.3"><title>Python Snippets - The Blue Book</title><link rel=stylesheet href=../../../assets/stylesheets/main.edf004c2.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.e6a45f82.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../css/timeago.css><link rel=stylesheet href=../../../stylesheets/extra.css><link rel=stylesheet href=../../../stylesheets/links.css><script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=light-blue> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#ipv4-regular-expression class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> For updates subscribe to the <a href=https://lyz-code.github.io/blue-book/newsletter/0_newsletter_index/ ><strong>RSS feed</strong></a> <img src=/blue-book/img/orange_logo.png height=15 width=15> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="The Blue Book" class="md-header__button md-logo" aria-label="The Blue Book" data-md-component=logo> <img src=../../../img/logo.bmp alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> The Blue Book </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Python Snippets </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=light-blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=blue-grey data-md-color-accent=light-blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/lyz-code/blue-book/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> lyz-code/blue-book </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="The Blue Book" class="md-nav__button md-logo" aria-label="The Blue Book" data-md-component=logo> <img src=../../../img/logo.bmp alt=logo> </a> The Blue Book </label> <div class=md-nav__source> <a href=https://github.com/lyz-code/blue-book/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> lyz-code/blue-book </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../projects/projects/ class=md-nav__link> Projects </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Activism <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Activism data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Activism </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_1 type=checkbox id=__nav_3_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../antifascism/ >Antifascism</a> </div> <nav class=md-nav aria-label=Antifascism data-md-level=2> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Antifascism </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../antitransphobia/ class=md-nav__link> Anti-Transphobia </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../diversity/ >Diversity, Equity and Inclusion</a> </div> <nav class=md-nav aria-label="Diversity, Equity and Inclusion" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Diversity, Equity and Inclusion </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Feminism <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Feminism data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Feminism </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../feminism/privileges/ class=md-nav__link> Privileges </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../free_knowledge/ class=md-nav__link> Free Knowledge </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../life_management/ >Life Management</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Life Management" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Life Management </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Health <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Health data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Health </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../sleep/ class=md-nav__link> Sleep </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../teeth/ >Teeth</a> </div> <nav class=md-nav aria-label=Teeth data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Teeth </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../remote_work/ class=md-nav__link> Remote Working </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_4 type=checkbox id=__nav_5_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../fitness_band/ >Fitness Tracker</a> </div> <nav class=md-nav aria-label="Fitness Tracker" data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Fitness Tracker </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6> Coding <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Coding data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Coding </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_1 type=checkbox id=__nav_6_1> <label class=md-nav__link for=__nav_6_1> Generic Coding Practices <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Generic Coding Practices" data-md-level=2> <label class=md-nav__title for=__nav_6_1> <span class="md-nav__icon md-icon"></span> Generic Coding Practices </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_1_1 type=checkbox id=__nav_6_1_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../versioning/ >Program Versioning</a> <label for=__nav_6_1_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Program Versioning" data-md-level=3> <label class=md-nav__title for=__nav_6_1_1> <span class="md-nav__icon md-icon"></span> Program Versioning </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../changelog/ class=md-nav__link> Keep a Changelog </a> </li> <li class=md-nav__item> <a href=../../../documentation/ class=md-nav__link> Writing good documentation </a> </li> <li class=md-nav__item> <a href=../../tdd/ class=md-nav__link> TDD </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_2 type=checkbox id=__nav_6_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../../python/ >Python</a> <label for=__nav_6_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Python data-md-level=2> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../json/json/ class=md-nav__link> JSON </a> </li> <li class=md-nav__item> <a href=../../sql/sql/ class=md-nav__link> SQL </a> </li> <li class=md-nav__item> <a href=../../../sqlite/ class=md-nav__link> SQLite </a> </li> <li class=md-nav__item> <a href=../../yaml/yaml/ class=md-nav__link> YAML </a> </li> <li class=md-nav__item> <a href=../../promql/promql/ class=md-nav__link> Promql </a> </li> <li class=md-nav__item> <a href=../../../vuejs/ class=md-nav__link> Vue.js </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_9 type=checkbox id=__nav_6_9> <div class="md-nav__link md-nav__link--index "> <a href=../../javascript/javascript/ >Javascript</a> </div> <nav class=md-nav aria-label=Javascript data-md-level=2> <label class=md-nav__title for=__nav_6_9> <span class="md-nav__icon md-icon"></span> Javascript </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../react/react/ class=md-nav__link> React </a> </li> <li class=md-nav__item> <a href=../../../issues/ class=md-nav__link> Issues </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <div class="md-nav__link md-nav__link--index "> <a href=../../../devops/devops/ >DevOps</a> <label for=__nav_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=DevOps data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> DevOps </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Software Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Software Architecture" data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Software Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../architecture/solid/ class=md-nav__link> SOLID </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_2 type=checkbox id=__nav_8_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../architecture/domain_driven_design/ >Domain Driven Design</a> <label for=__nav_8_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Domain Driven Design" data-md-level=2> <label class=md-nav__title for=__nav_8_2> <span class="md-nav__icon md-icon"></span> Domain Driven Design </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../adr/ class=md-nav__link> Architecture Decision Record </a> </li> <li class=md-nav__item> <a href=../../../architecture/database_architecture/ class=md-nav__link> Database Architecture </a> </li> <li class=md-nav__item> <a href=../../../architecture/orm_builder_query_or_raw_sql/ class=md-nav__link> ORM, Query Builder or Raw SQL </a> </li> <li class=md-nav__item> <a href=../../../architecture/microservices/ class=md-nav__link> Microservices </a> </li> <li class=md-nav__item> <a href=../../../architecture/restful_apis/ class=md-nav__link> Restful APIS </a> </li> <li class=md-nav__item> <a href=../../../architecture/redis/ class=md-nav__link> Redis </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_9 type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9> Data Analysis <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Data Analysis" data-md-level=1> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Data Analysis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../data_analysis/recommender_systems/recommender_systems/ class=md-nav__link> Recommender Systems </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10 type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10> Operative Systems <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Operative Systems" data-md-level=1> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Operative Systems </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10_1 type=checkbox id=__nav_10_1> <label class=md-nav__link for=__nav_10_1> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=2> <label class=md-nav__title for=__nav_10_1> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux_snippets/ class=md-nav__link> Linux Snippets </a> </li> <li class=md-nav__item> <a href=../../../afew/ class=md-nav__link> afew </a> </li> <li class=md-nav__item> <a href=../../../alot/ class=md-nav__link> alot </a> </li> <li class=md-nav__item> <a href=../../../activitywatch/ class=md-nav__link> ActivityWatch </a> </li> <li class=md-nav__item> <a href=../../../beancount/ class=md-nav__link> beancount </a> </li> <li class=md-nav__item> <a href=../../../beets/ class=md-nav__link> Beets </a> </li> <li class=md-nav__item> <a href=../../../linux/brew/ class=md-nav__link> brew </a> </li> <li class=md-nav__item> <a href=../../../docker/ class=md-nav__link> Docker </a> </li> <li class=md-nav__item> <a href=../../../dunst/ class=md-nav__link> dunst </a> </li> <li class=md-nav__item> <a href=../../../self_hosted/dynamicdns/ class=md-nav__link> Dynamic DNS </a> </li> <li class=md-nav__item> <a href=../../../linux/elasticsearch/ class=md-nav__link> elasticsearch </a> </li> <li class=md-nav__item> <a href=../../../linux/fail2ban/ class=md-nav__link> fail2ban </a> </li> <li class=md-nav__item> <a href=../../../gajim/ class=md-nav__link> Gajim </a> </li> <li class=md-nav__item> <a href=../../../gh/ class=md-nav__link> Github cli </a> </li> <li class=md-nav__item> <a href=../../../linux/google_chrome/ class=md-nav__link> google chrome </a> </li> <li class=md-nav__item> <a href=../../../graylog/ class=md-nav__link> Graylog </a> </li> <li class=md-nav__item> <a href=../../../linux/haproxy/ class=md-nav__link> HAProxy </a> </li> <li class=md-nav__item> <a href=../../../docs/linux/hard_drive_health.md class=md-nav__link> Hard drive health </a> </li> <li class=md-nav__item> <a href=../../../husboard/ class=md-nav__link> Hushboard </a> </li> <li class=md-nav__item> <a href=../../../linux/hypothesis/ class=md-nav__link> hypothesis </a> </li> <li class=md-nav__item> <a href=../../../jellyfin/ class=md-nav__link> Jellyfin </a> </li> <li class=md-nav__item> <a href=../../../ffmpeg/ class=md-nav__link> ffmpeg </a> </li> <li class=md-nav__item> <a href=../../../kitty/ class=md-nav__link> Kitty </a> </li> <li class=md-nav__item> <a href=../../../linux/luks/luks/ class=md-nav__link> LUKS </a> </li> <li class=md-nav__item> <a href=../../../mbsync/ class=md-nav__link> mbsync </a> </li> <li class=md-nav__item> <a href=../../../linux/mkdocs/ class=md-nav__link> mkdocs </a> </li> <li class=md-nav__item> <a href=../../../modipy.md class=md-nav__link> Modipy </a> </li> <li class=md-nav__item> <a href=../../../linux/monica/ class=md-nav__link> monica </a> </li> <li class=md-nav__item> <a href=../../../notmuch/ class=md-nav__link> notmuch </a> </li> <li class=md-nav__item> <a href=../../../linux/nodejs/ class=md-nav__link> nodejs </a> </li> <li class=md-nav__item> <a href=../../../oracle_database/ class=md-nav__link> Oracle Database </a> </li> <li class=md-nav__item> <a href=../../../peek/ class=md-nav__link> Peek </a> </li> <li class=md-nav__item> <a href=../../../linux/rm/ class=md-nav__link> rm </a> </li> <li class=md-nav__item> <a href=../../../linux/syncthing/ class=md-nav__link> Syncthing </a> </li> <li class=md-nav__item> <a href=../../../tahoe/ class=md-nav__link> Tahoe-LAFS </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10_1_36 type=checkbox id=__nav_10_1_36> <div class="md-nav__link md-nav__link--index "> <a href=../../../vim/ >Vim</a> <label for=__nav_10_1_36> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Vim data-md-level=3> <label class=md-nav__title for=__nav_10_1_36> <span class="md-nav__icon md-icon"></span> Vim </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../wake_on_lan/ class=md-nav__link> Wake on Lan </a> </li> <li class=md-nav__item> <a href=../../../linux/wireguard/ class=md-nav__link> Wireguard </a> </li> <li class=md-nav__item> <a href=../../../linux/zfs/ class=md-nav__link> ZFS </a> </li> <li class=md-nav__item> <a href=../../../linux/zip/ class=md-nav__link> zip </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10_2 type=checkbox id=__nav_10_2> <label class=md-nav__link for=__nav_10_2> Android <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Android data-md-level=2> <label class=md-nav__title for=__nav_10_2> <span class="md-nav__icon md-icon"></span> Android </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cone/ class=md-nav__link> cone </a> </li> <li class=md-nav__item> <a href=../../../gadgetbridge/ class=md-nav__link> GadgetBridge </a> </li> <li class=md-nav__item> <a href=../../../osmand/ class=md-nav__link> OsmAnd </a> </li> <li class=md-nav__item> <a href=../../../signal/ class=md-nav__link> Signal </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11 type=checkbox id=__nav_11> <label class=md-nav__link for=__nav_11> Arts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Arts data-md-level=1> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> Arts </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_1 type=checkbox id=__nav_11_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../writing/writing/ >Writing</a> <label for=__nav_11_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Writing data-md-level=2> <label class=md-nav__title for=__nav_11_1> <span class="md-nav__icon md-icon"></span> Writing </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_2 type=checkbox id=__nav_11_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../cooking/ >Cooking</a> </div> <nav class=md-nav aria-label=Cooking data-md-level=2> <label class=md-nav__title for=__nav_11_2> <span class="md-nav__icon md-icon"></span> Cooking </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../pilates/ class=md-nav__link> Pilates </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_4 type=checkbox id=__nav_11_4> <label class=md-nav__link for=__nav_11_4> Dancing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Dancing data-md-level=2> <label class=md-nav__title for=__nav_11_4> <span class="md-nav__icon md-icon"></span> Dancing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../dancing/rave_dances/ class=md-nav__link> Rave Dances </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_4_2 type=checkbox id=__nav_11_4_2> <label class=md-nav__link for=__nav_11_4_2> Shuffle <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Shuffle data-md-level=3> <label class=md-nav__title for=__nav_11_4_2> <span class="md-nav__icon md-icon"></span> Shuffle </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../dancing/shuffle_basics/ class=md-nav__link> Basics </a> </li> <li class=md-nav__item> <a href=../../../dancing/shuffle_kicks/ class=md-nav__link> Kicks </a> </li> <li class=md-nav__item> <a href=../../../dancing/shuffle_spins/ class=md-nav__link> Spins </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../dancing/cutting_shapes_basics/ class=md-nav__link> Cutting Shapes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../meditation/ class=md-nav__link> Meditation </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_6 type=checkbox id=__nav_11_6> <label class=md-nav__link for=__nav_11_6> Video Gaming <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Video Gaming" data-md-level=2> <label class=md-nav__title for=__nav_11_6> <span class="md-nav__icon md-icon"></span> Video Gaming </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_6_1 type=checkbox id=__nav_11_6_1> <label class=md-nav__link for=__nav_11_6_1> The Battle for Wesnoth <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="The Battle for Wesnoth" data-md-level=3> <label class=md-nav__title for=__nav_11_6_1> <span class="md-nav__icon md-icon"></span> The Battle for Wesnoth </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../wesnoth/ class=md-nav__link> The Battle for Wesnoth </a> </li> <li class=md-nav__item> <a href=../../../wesnoth_loyalist/ class=md-nav__link> Loyalist </a> </li> <li class=md-nav__item> <a href=../../../wesnoth_rebels/ class=md-nav__link> Rebels </a> </li> <li class=md-nav__item> <a href=../../../wesnoth_northerners/ class=md-nav__link> Northeners </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_7 type=checkbox id=__nav_11_7> <label class=md-nav__link for=__nav_11_7> Board Gaming <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Board Gaming" data-md-level=2> <label class=md-nav__title for=__nav_11_7> <span class="md-nav__icon md-icon"></span> Board Gaming </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../regicide/ class=md-nav__link> Regicide </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11_8 type=checkbox id=__nav_11_8> <div class="md-nav__link md-nav__link--index "> <a href=../../../drawing/drawing/ >Drawing</a> </div> <nav class=md-nav aria-label=Drawing data-md-level=2> <label class=md-nav__title for=__nav_11_8> <span class="md-nav__icon md-icon"></span> Drawing </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../origami/ class=md-nav__link> Origami </a> </li> <li class=md-nav__item> <a href=../../../fun/ class=md-nav__link> Fun </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_12 type=checkbox id=__nav_12> <label class=md-nav__link for=__nav_12> Psychology <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Psychology data-md-level=1> <label class=md-nav__title for=__nav_12> <span class="md-nav__icon md-icon"></span> Psychology </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../psychology/the_xy_problem/ class=md-nav__link> The XY Problem </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_13 type=checkbox id=__nav_13> <label class=md-nav__link for=__nav_13> Botany <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Botany data-md-level=1> <label class=md-nav__title for=__nav_13> <span class="md-nav__icon md-icon"></span> Botany </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../botany/trees/ class=md-nav__link> Trees </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../emojis/ class=md-nav__link> Emojis </a> </li> <li class=md-nav__item> <a href=../../../contact/ class=md-nav__link> Contact </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_16 type=checkbox id=__nav_16> <div class="md-nav__link md-nav__link--index "> <a href=../../../newsletter/0_newsletter_index/ >Newsletters</a> <label for=__nav_16> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Newsletters data-md-level=1> <label class=md-nav__title for=__nav_16> <span class="md-nav__icon md-icon"></span> Newsletters </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#ipv4-regular-expression class=md-nav__link> IPv4 regular expression </a> </li> <li class=md-nav__item> <a href=#remove-the-elements-of-a-list-from class=md-nav__link> [Remove the elements of a list from </a> </li> <li class=md-nav__item> <a href=#copy-a-directory class=md-nav__link> Copy a directory </a> </li> <li class=md-nav__item> <a href=#capture-the-stdout-of-a-function class=md-nav__link> Capture the stdout of a function </a> </li> <li class=md-nav__item> <a href=#make-temporal class=md-nav__link> [Make temporal </a> </li> <li class=md-nav__item> <a href=#change-the-working-directory-of-a-test class=md-nav__link> Change the working directory of a test </a> </li> <li class=md-nav__item> <a href=#remove-a-substring-from-the-end-of-a-string class=md-nav__link> Remove a substring from the end of a string </a> </li> <li class=md-nav__item> <a href=#make-a-flat-list-of-lists-with-a-list-comprehension class=md-nav__link> Make a flat list of lists with a list comprehension </a> </li> <li class=md-nav__item> <a href=#replace-all-characters-of-a-string-with-another-character class=md-nav__link> Replace all characters of a string with another character </a> </li> <li class=md-nav__item> <a href=#locate-element-in-list class=md-nav__link> Locate element in list </a> </li> <li class=md-nav__item> <a href=#transpose-a-list-of-lists class=md-nav__link> Transpose a list of lists </a> </li> <li class=md-nav__item> <a href=#check-the-type-of-a-list-of-strings class=md-nav__link> Check the type of a list of strings </a> </li> <li class=md-nav__item> <a href=#install-default-directories-and-files-for-a-command-line-program class=md-nav__link> Install default directories and files for a command line program </a> </li> <li class=md-nav__item> <a href=#check-if-a-dictionary-is-a-subset-of-another class=md-nav__link> Check if a dictionary is a subset of another </a> </li> <li class=md-nav__item> <a href=#when-to-use-isinstance-and-when-to-use-type class=md-nav__link> When to use isinstance and when to use type </a> </li> <li class=md-nav__item> <a href=#find-a-static-file-of-a-python-module class=md-nav__link> Find a static file of a python module </a> </li> <li class=md-nav__item> <a href=#delete-a-file class=md-nav__link> Delete a file </a> </li> <li class=md-nav__item> <a href=#measure-elapsed-time-between-lines-of-code class=md-nav__link> Measure elapsed time between lines of code </a> </li> <li class=md-nav__item> <a href=#create-combination-of-elements-in-groups-of-two class=md-nav__link> Create combination of elements in groups of two </a> </li> <li class=md-nav__item> <a href=#convert-html-to-readable-plaintext class=md-nav__link> Convert html to readable plaintext </a> </li> <li class=md-nav__item> <a href=#parse-a-datetime-from-a-string class=md-nav__link> Parse a datetime from a string </a> </li> <li class=md-nav__item> <a href=#install-a-python-dependency-from-a-git-repository class=md-nav__link> Install a python dependency from a git repository </a> </li> <li class=md-nav__item> <a href=#check-or-test-directories-and-files class=md-nav__link> Check or test directories and files </a> </li> <li class=md-nav__item> <a href=#remove-the-extension-of-a-file class=md-nav__link> Remove the extension of a file </a> </li> <li class=md-nav__item> <a href=#iterate-over-the-files-of-a-directory class=md-nav__link> Iterate over the files of a directory </a> <nav class=md-nav aria-label="Iterate over the files of a directory"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-directory class=md-nav__link> Create directory </a> </li> <li class=md-nav__item> <a href=#touch-a-file class=md-nav__link> Touch a file </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#get-the-first-day-of-next-month class=md-nav__link> Get the first day of next month </a> </li> <li class=md-nav__item> <a href=#get-the-week-number-of-a-datetime class=md-nav__link> Get the week number of a datetime </a> </li> <li class=md-nav__item> <a href=#get-the-monday-of-a-week-number class=md-nav__link> Get the monday of a week number </a> </li> <li class=md-nav__item> <a href=#get-the-month-name-from-a-number class=md-nav__link> Get the month name from a number </a> </li> <li class=md-nav__item> <a href=#get-ordinal-from-number class=md-nav__link> Get ordinal from number </a> </li> <li class=md-nav__item> <a href=#group-or-sort-a-list-of-dictionaries-or-objects-by-a-specific-key class=md-nav__link> Group or sort a list of dictionaries or objects by a specific key </a> <nav class=md-nav aria-label="Group or sort a list of dictionaries or objects by a specific key"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sorting-basics class=md-nav__link> Sorting basics </a> </li> <li class=md-nav__item> <a href=#key-functions class=md-nav__link> Key functions </a> </li> <li class=md-nav__item> <a href=#sorts-stability-and-complex-sorts class=md-nav__link> Sorts stability and complex sorts </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#iterate-over-an-instance-objects-data-attributes-in-python class=md-nav__link> Iterate over an instance object's data attributes in Python </a> </li> <li class=md-nav__item> <a href=#generate-ssh-key class=md-nav__link> Generate ssh key </a> </li> <li class=md-nav__item> <a href=#make-multiline-code-look-clean class=md-nav__link> Make multiline code look clean </a> </li> <li class=md-nav__item> <a href=#play-a-sound class=md-nav__link> Play a sound </a> </li> <li class=md-nav__item> <a href=#deep-copy-a-dictionary class=md-nav__link> Deep copy a dictionary </a> </li> <li class=md-nav__item> <a href=#find-the-root-directory-of-a-package class=md-nav__link> Find the root directory of a package </a> <nav class=md-nav aria-label="Find the root directory of a package"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#installation class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=#usage class=md-nav__link> Usage </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#check-if-an-object-has-an-attribute class=md-nav__link> Check if an object has an attribute </a> </li> <li class=md-nav__item> <a href=#check-if-a-loop-ends-completely class=md-nav__link> Check if a loop ends completely </a> <nav class=md-nav aria-label="Check if a loop ends completely"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#merge-two-lists class=md-nav__link> Merge two lists </a> </li> <li class=md-nav__item> <a href=#merge-two-dictionaries class=md-nav__link> Merge two dictionaries </a> </li> <li class=md-nav__item> <a href=#create-user-defined-exceptions class=md-nav__link> Create user defined exceptions </a> </li> <li class=md-nav__item> <a href=#import-a-module-or-its-objects-from-within-a-python-program class=md-nav__link> Import a module or it's objects from within a python program </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#get-systems-timezone-and-use-it-in-datetime class=md-nav__link> Get system's timezone and use it in datetime </a> </li> <li class=md-nav__item> <a href=#capitalize-a-sentence class=md-nav__link> Capitalize a sentence </a> </li> <li class=md-nav__item> <a href=#get-the-last-monday-datetime class=md-nav__link> Get the last monday datetime </a> </li> <li class=md-nav__item> <a href=#issues class=md-nav__link> Issues </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/lyz-code/blue-book/edit/master/docs/coding/python/python_snippets.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>Python Snippets</h1> <h2 id=ipv4-regular-expression><a href=https://stackoverflow.com/questions/55928637/regex-for-matching-ipv4-addresses>IPv4 regular expression</a><a class=headerlink href=#ipv4-regular-expression title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=n>regex</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span>
    <span class=sa>r</span><span class=s2>&quot;(?&lt;![-\.\d])(?:0{0,2}?[0-9]\.|1\d?\d?\.|2[0-5]?[0-5]?\.)</span><span class=si>{3}</span><span class=s2>&quot;</span>
    <span class=sa>r</span><span class=s1>&#39;(?:0{0,2}?[0-9]|1\d?\d?|2[0-5]?[0-5]?)(?![\.\d])&quot;^[0-9]{1,3}*$&#39;</span>
<span class=p>)</span>
</code></pre></div> <h2 id=remove-the-elements-of-a-list-from>[Remove the elements of a list from<a class=headerlink href=#remove-the-elements-of-a-list-from title="Permanent link">⚑</a></h2> <p>another](<a href=https://stackoverflow.com/questions/4211209/remove-all-the-elements-that-occur-in-one-list-from-another>https://stackoverflow.com/questions/4211209/remove-all-the-elements-that-occur-in-one-list-from-another</a>)</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=nb>set</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>])</span> <span class=o>-</span> <span class=nb>set</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>8</span><span class=p>])</span>
<span class=nb>set</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>6</span><span class=p>])</span>
</code></pre></div> <p>Note, however, that sets do not preserve the order of elements, and cause any duplicated elements to be removed. The elements also need to be hashable. If these restrictions are tolerable, this may often be the simplest and highest performance option.</p> <h2 id=copy-a-directory><a href=https://stackoverflow.com/questions/1868714/how-do-i-copy-an-entire-directory-of-files-into-an-existing-directory-using-pyth/22331852>Copy a directory</a><a class=headerlink href=#copy-a-directory title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>shutil</span>

<span class=n>shutil</span><span class=o>.</span><span class=n>copytree</span><span class=p>(</span><span class=s1>&#39;bar&#39;</span><span class=p>,</span> <span class=s1>&#39;foo&#39;</span><span class=p>)</span>
</code></pre></div> <h2 id=capture-the-stdout-of-a-function><a href=https://stackoverflow.com/questions/16571150/how-to-capture-stdout-output-from-a-python-function-call>Capture the stdout of a function</a><a class=headerlink href=#capture-the-stdout-of-a-function title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>io</span>
<span class=kn>from</span> <span class=nn>contextlib</span> <span class=kn>import</span> <span class=n>redirect_stdout</span>

<span class=n>f</span> <span class=o>=</span> <span class=n>io</span><span class=o>.</span><span class=n>StringIO</span><span class=p>()</span>
<span class=k>with</span> <span class=n>redirect_stdout</span><span class=p>(</span><span class=n>f</span><span class=p>):</span>
    <span class=n>do_something</span><span class=p>(</span><span class=n>my_object</span><span class=p>)</span>
<span class=n>out</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>getvalue</span><span class=p>()</span>
</code></pre></div> <h2 id=make-temporal>[Make temporal<a class=headerlink href=#make-temporal title="Permanent link">⚑</a></h2> <p>directory](<a href=https://stackoverflow.com/questions/3223604/how-to-create-a-temporary-directory-and-get-its-path-file-name>https://stackoverflow.com/questions/3223604/how-to-create-a-temporary-directory-and-get-its-path-file-name</a>)</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>tempfile</span>

<span class=n>dirpath</span> <span class=o>=</span> <span class=n>tempfile</span><span class=o>.</span><span class=n>mkdtemp</span><span class=p>()</span>
</code></pre></div> <h2 id=change-the-working-directory-of-a-test><a href=https://stackoverflow.com/questions/62044541/change-pytest-working-directory-to-test-case-directory>Change the working directory of a test</a><a class=headerlink href=#change-the-working-directory-of-a-test title="Permanent link">⚑</a></h2> <p>The following function-level fixture will change to the test case directory, run the test (<code>yield</code>), then change back to the calling directory to avoid side-effects.</p> <div class=highlight><pre><span></span><code><span class=nd>@pytest</span><span class=o>.</span><span class=n>fixture</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;change_test_dir&quot;</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>change_test_dir_</span><span class=p>(</span><span class=n>request</span><span class=p>:</span> <span class=n>SubRequest</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
    <span class=n>os</span><span class=o>.</span><span class=n>chdir</span><span class=p>(</span><span class=n>request</span><span class=o>.</span><span class=n>fspath</span><span class=o>.</span><span class=n>dirname</span><span class=p>)</span>
    <span class=k>yield</span>
    <span class=n>os</span><span class=o>.</span><span class=n>chdir</span><span class=p>(</span><span class=n>request</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>invocation_dir</span><span class=p>)</span>
</code></pre></div> <ul> <li><code>request</code> is a built-in pytest fixture</li> <li><code>fspath</code> is the <code>LocalPath</code> to the test module being executed</li> <li><code>dirname</code> is the directory of the test module</li> <li><code>request.config.invocationdir</code> is the folder from which pytest was executed</li> <li><code>request.config.rootdir</code> is the pytest root, doesn't change based on where you run pytest. Not used here, but could be useful.</li> </ul> <p>Any processes that are kicked off by the test will use the test case folder as their working directory and copy their logs, outputs, etc. there, regardless of where the test suite was executed.</p> <h2 id=remove-a-substring-from-the-end-of-a-string><a href=https://stackoverflow.com/questions/1038824/how-do-i-remove-a-substring-from-the-end-of-a-string>Remove a substring from the end of a string</a><a class=headerlink href=#remove-a-substring-from-the-end-of-a-string title="Permanent link">⚑</a></h2> <p>On Python 3.9 and newer you can use the <code>removeprefix</code> and <code>removesuffix</code> methods to remove an entire substring from either side of the string:</p> <div class=highlight><pre><span></span><code><span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;abcdc.com&#39;</span>
<span class=n>url</span><span class=o>.</span><span class=n>removesuffix</span><span class=p>(</span><span class=s1>&#39;.com&#39;</span><span class=p>)</span>    <span class=c1># Returns &#39;abcdc&#39;</span>
<span class=n>url</span><span class=o>.</span><span class=n>removeprefix</span><span class=p>(</span><span class=s1>&#39;abcdc.&#39;</span><span class=p>)</span>  <span class=c1># Returns &#39;com&#39;</span>
</code></pre></div> <p>On Python 3.8 and older you can use <code>endswith</code> and slicing:</p> <div class=highlight><pre><span></span><code><span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;abcdc.com&#39;</span>
<span class=k>if</span> <span class=n>url</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s1>&#39;.com&#39;</span><span class=p>):</span>
    <span class=n>url</span> <span class=o>=</span> <span class=n>url</span><span class=p>[:</span><span class=o>-</span><span class=mi>4</span><span class=p>]</span>
</code></pre></div> <p>Or a regular expression:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>re</span>
<span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;abcdc.com&#39;</span>
<span class=n>url</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=s1>&#39;\.com$&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>url</span><span class=p>)</span>
</code></pre></div> <h2 id=make-a-flat-list-of-lists-with-a-list-comprehension><a href=https://stackoverflow.com/questions/952914/how-to-make-a-flat-list-out-of-a-list-of-lists>Make a flat list of lists with a list comprehension</a><a class=headerlink href=#make-a-flat-list-of-lists-with-a-list-comprehension title="Permanent link">⚑</a></h2> <p>There is no nice way to do it :(. The best I've found is:</p> <div class=highlight><pre><span></span><code><span class=n>t</span> <span class=o>=</span> <span class=p>[[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>],</span> <span class=p>[</span><span class=mi>7</span><span class=p>],</span> <span class=p>[</span><span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>]]</span>
<span class=n>flat_list</span> <span class=o>=</span> <span class=p>[</span><span class=n>item</span> <span class=k>for</span> <span class=n>sublist</span> <span class=ow>in</span> <span class=n>t</span> <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>sublist</span><span class=p>]</span>
</code></pre></div> <h2 id=replace-all-characters-of-a-string-with-another-character><a href=https://stackoverflow.com/questions/48995979/how-to-replace-all-characters-in-a-string-with-one-character/48996018>Replace all characters of a string with another character</a><a class=headerlink href=#replace-all-characters-of-a-string-with-another-character title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=n>mystring</span> <span class=o>=</span> <span class=s1>&#39;_&#39;</span><span class=o>*</span><span class=nb>len</span><span class=p>(</span><span class=n>mystring</span><span class=p>)</span>
</code></pre></div> <h2 id=locate-element-in-list><a href=https://appdividend.com/2019/11/16/how-to-find-element-in-list-in-python/ >Locate element in list</a><a class=headerlink href=#locate-element-in-list title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=n>a</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>]</span>

<span class=n>index</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=n>index</span><span class=p>(</span><span class=s1>&#39;b&#39;</span><span class=p>)</span>
</code></pre></div> <h2 id=transpose-a-list-of-lists><a href=https://stackoverflow.com/questions/6473679/transpose-list-of-lists>Transpose a list of lists</a><a class=headerlink href=#transpose-a-list-of-lists title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>l</span><span class=o>=</span><span class=p>[[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>],[</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>],[</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>]]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=p>[</span><span class=nb>list</span><span class=p>(</span><span class=n>i</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=o>*</span><span class=n>l</span><span class=p>)]</span>
<span class=o>...</span> <span class=p>[[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>7</span><span class=p>],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>8</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>9</span><span class=p>]]</span>
</code></pre></div> <h2 id=check-the-type-of-a-list-of-strings><a href=https://stackoverflow.com/questions/18495098/python-check-if-an-object-is-a-list-of-strings>Check the type of a list of strings</a><a class=headerlink href=#check-the-type-of-a-list-of-strings title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>_is_list_of_lists</span><span class=p>(</span><span class=n>data</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
    <span class=sd>&quot;&quot;&quot;Check if data is a list of strings.&quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>data</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
        <span class=k>return</span> <span class=nb>all</span><span class=p>(</span><span class=nb>isinstance</span><span class=p>(</span><span class=n>elem</span><span class=p>,</span> <span class=nb>list</span><span class=p>)</span> <span class=k>for</span> <span class=n>elem</span> <span class=ow>in</span> <span class=n>data</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>False</span>
</code></pre></div> <h2 id=install-default-directories-and-files-for-a-command-line-program>Install default directories and files for a command line program<a class=headerlink href=#install-default-directories-and-files-for-a-command-line-program title="Permanent link">⚑</a></h2> <p>I've been trying for a long time to configure <code>setup.py</code> to run the required steps to configure the required directories and files when doing <code>pip install</code> without success.</p> <p>Finally, I decided that the program itself should create the data once the <code>FileNotFoundError</code> exception is found. That way, you don't penalize the load time because if the file or directory exists, that code is not run.</p> <h2 id=check-if-a-dictionary-is-a-subset-of-another><a href=https://stackoverflow.com/questions/9323749/how-to-check-if-one-dictionary-is-a-subset-of-another-larger-dictionary>Check if a dictionary is a subset of another</a><a class=headerlink href=#check-if-a-dictionary-is-a-subset-of-another title="Permanent link">⚑</a></h2> <p>If you have two dictionaries <code>big = {'a': 1, 'b': 2, 'c':3}</code> and <code>small = {'c': 3, 'a': 1}</code>, and want to check whether <code>small</code> is a subset of <code>big</code>, use the next snippet:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>small</span><span class=o>.</span><span class=n>items</span><span class=p>()</span> <span class=o>&lt;=</span> <span class=n>big</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
<span class=kc>True</span>
</code></pre></div> <p>As the code is not very common or intuitive, I'd add a comment to explain what you're doing.</p> <h2 id=when-to-use-isinstance-and-when-to-use-type><a href=https://towardsdatascience.com/difference-between-type-and-isinstance-in-python-47fae6fbb068>When to use <code>isinstance</code> and when to use <code>type</code></a><a class=headerlink href=#when-to-use-isinstance-and-when-to-use-type title="Permanent link">⚑</a></h2> <p><code>isinstance</code> takes into account inheritance, while <code>type</code> doesn't. So if we have the next code:</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Shape</span><span class=p>:</span>
    <span class=k>pass</span>

<span class=k>class</span> <span class=nc>Rectangle</span><span class=p>(</span><span class=n>Shape</span><span class=p>):</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>length</span><span class=p>,</span> <span class=n>width</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>length</span> <span class=o>=</span> <span class=n>length</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>width</span> <span class=o>=</span> <span class=n>width</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>area</span> <span class=o>=</span> <span class=n>length</span> <span class=o>*</span> <span class=n>width</span>

    <span class=k>def</span> <span class=nf>get_area</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>length</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>width</span>

<span class=k>class</span> <span class=nc>Square</span><span class=p>(</span><span class=n>Rectangle</span><span class=p>):</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>length</span><span class=p>):</span>
        <span class=n>Rectangle</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>length</span><span class=p>,</span><span class=n>length</span><span class=p>)</span>
</code></pre></div> <p>And we want to check if an object <code>a = Square(5)</code> is of type <code>Rectangle</code>, we could not use <code>isinstance</code> because it'll return <code>True</code> as it's a subclass of <code>Rectangle</code>:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>Rectangle</span><span class=p>)</span>
<span class=kc>True</span>
</code></pre></div> <p>Instead, use a comparison with <code>type</code>:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=nb>type</span><span class=p>(</span><span class=n>a</span><span class=p>)</span> <span class=o>==</span> <span class=n>Rectangle</span>
<span class=kc>False</span>
</code></pre></div> <h2 id=find-a-static-file-of-a-python-module><a href=https://stackoverflow.com/questions/39104/finding-a-file-in-a-python-module-distribution>Find a static file of a python module</a><a class=headerlink href=#find-a-static-file-of-a-python-module title="Permanent link">⚑</a></h2> <p>Useful when you want to initialize a configuration file of a cli program when it's not present.</p> <p>Imagine you have a <code>setup.py</code> with the next contents:</p> <div class=highlight><pre><span></span><code><span class=n>setup</span><span class=p>(</span>
    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;pynbox&quot;</span><span class=p>,</span>
    <span class=n>packages</span><span class=o>=</span><span class=n>find_packages</span><span class=p>(</span><span class=s2>&quot;src&quot;</span><span class=p>),</span>
    <span class=n>package_dir</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;&quot;</span><span class=p>:</span> <span class=s2>&quot;src&quot;</span><span class=p>},</span>
    <span class=n>package_data</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;pynbox&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;py.typed&quot;</span><span class=p>,</span> <span class=s2>&quot;assets/config.yaml&quot;</span><span class=p>]},</span>
</code></pre></div> <p>Then you could import the data with:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>pkg_resources</span>

<span class=n>file_path</span> <span class=o>=</span> <span class=n>pkg_resources</span><span class=o>.</span><span class=n>resource_filename</span><span class=p>(</span><span class=s2>&quot;pynbox&quot;</span><span class=p>,</span> <span class=s2>&quot;assets/config.yaml&quot;</span><span class=p>),</span>
</code></pre></div> <h2 id=delete-a-file><a href=https://www.w3schools.com/python/python_file_remove.asp>Delete a file</a><a class=headerlink href=#delete-a-file title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>os</span>
<span class=n>os</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=s1>&#39;demofile.txt&#39;</span><span class=p>)</span>
</code></pre></div> <h2 id=measure-elapsed-time-between-lines-of-code><a href=https://stackoverflow.com/questions/7370801/how-to-measure-elapsed-time-in-python>Measure elapsed time between lines of code</a><a class=headerlink href=#measure-elapsed-time-between-lines-of-code title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>time</span>

<span class=n>start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>&quot;hello&quot;</span><span class=p>)</span>
<span class=n>end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
<span class=nb>print</span><span class=p>(</span><span class=n>end</span> <span class=o>-</span> <span class=n>start</span><span class=p>)</span>
</code></pre></div> <h2 id=create-combination-of-elements-in-groups-of-two><a href=https://stackoverflow.com/questions/20762574/combinations-with-two-elements>Create combination of elements in groups of two</a><a class=headerlink href=#create-combination-of-elements-in-groups-of-two title="Permanent link">⚑</a></h2> <p>Using the combinations function in Python's itertools module:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=nb>list</span><span class=p>(</span><span class=n>itertools</span><span class=o>.</span><span class=n>combinations</span><span class=p>(</span><span class=s1>&#39;ABC&#39;</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>
<span class=p>[(</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=s1>&#39;C&#39;</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=s1>&#39;C&#39;</span><span class=p>)]</span>
</code></pre></div> <p>If you want the permutations use <code>itertools.permutations</code>.</p> <h2 id=convert-html-to-readable-plaintext><a href=https://stackoverflow.com/questions/13337528/rendered-html-to-plain-text-using-python>Convert html to readable plaintext</a><a class=headerlink href=#convert-html-to-readable-plaintext title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code>pip install html2text
</code></pre></div> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>html2text</span>
<span class=n>html</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&quot;foobar.html&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
<span class=nb>print</span><span class=p>(</span><span class=n>html2text</span><span class=o>.</span><span class=n>html2text</span><span class=p>(</span><span class=n>html</span><span class=p>))</span>
</code></pre></div> <h2 id=parse-a-datetime-from-a-string><a href=https://stackoverflow.com/questions/466345/converting-string-into-datetime>Parse a datetime from a string</a><a class=headerlink href=#parse-a-datetime-from-a-string title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>dateutil</span> <span class=kn>import</span> <span class=n>parser</span>
<span class=n>parser</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=s2>&quot;Aug 28 1999 12:00AM&quot;</span><span class=p>)</span>  <span class=c1># datetime.datetime(1999, 8, 28, 0, 0)</span>
</code></pre></div> <h2 id=install-a-python-dependency-from-a-git-repository>Install a python dependency from a git repository<a class=headerlink href=#install-a-python-dependency-from-a-git-repository title="Permanent link">⚑</a></h2> <p>With <a href=https://stackoverflow.com/questions/16584552/how-to-state-in-requirements-txt-a-direct-github-source>pip you can</a>:</p> <div class=highlight><pre><span></span><code>pip install git+git://github.com/path/to/repository@master
</code></pre></div> <p>If you want <a href=https://stackoverflow.com/questions/32688688/how-to-write-setup-py-to-include-a-git-repository-as-a-dependency/54794506#54794506>to hard code it in your <code>setup.py</code></a>, you need to:</p> <div class=highlight><pre><span></span><code><span class=n>install_requires</span> <span class=o>=</span> <span class=p>[</span>
  <span class=s1>&#39;some-pkg @ git+ssh://git@github.com/someorgname/pkg-repo-name@v1.1#egg=some-pkg&#39;</span><span class=p>,</span>
<span class=p>]</span>
</code></pre></div> <p>But <a href=https://github.com/BaderLab/saber/issues/35>Pypi won't allow you to upload the package</a>, as it will give you an error:</p> <div class=highlight><pre><span></span><code>HTTPError: 400 Bad Request from https://test.pypi.org/legacy/
Invalid value for requires_dist. Error: Can&#39;t have direct dependency: &#39;deepdiff @ git+git://github.com/lyz-code/deepdiff@master&#39;
</code></pre></div> <p>It looks like this is a conscious decision on the PyPI side. Basically, they don't want pip to reach out to URLs outside their site when installing from PyPI.</p> <p>An ugly patch is to install the dependencies in a <code>PostInstall</code> custom script in the <code>setup.py</code> of your program:</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>setuptools.command.install</span> <span class=kn>import</span> <span class=n>install</span>
<span class=kn>from</span> <span class=nn>subprocess</span> <span class=kn>import</span> <span class=n>getoutput</span>

<span class=c1># ignore: cannot subclass install, has type Any. And what would you do?</span>
<span class=k>class</span> <span class=nc>PostInstall</span><span class=p>(</span><span class=n>install</span><span class=p>):</span>  <span class=c1># type: ignore</span>
    <span class=sd>&quot;&quot;&quot;Install direct dependency.</span>

<span class=sd>    Pypi doesn&#39;t allow uploading packages with direct dependencies, so we need to</span>
<span class=sd>    install them manually.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span> <span class=nf>run</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=sd>&quot;&quot;&quot;Install dependencies.&quot;&quot;&quot;</span>
        <span class=n>install</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=nb>print</span><span class=p>(</span><span class=n>getoutput</span><span class=p>(</span><span class=s2>&quot;pip install git+git://github.com/lyz-code/deepdiff@master&quot;</span><span class=p>))</span>

<span class=n>setup</span><span class=p>(</span>
    <span class=n>cmdclass</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;install&#39;</span><span class=p>:</span> <span class=n>PostInstall</span><span class=p>}</span>
<span class=p>)</span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>It may not work!</p> <p>Last time I used this solution, when I added the library on a <code>setup.py</code> the direct dependencies weren't installed :S</p> </div> <h2 id=check-or-test-directories-and-files>Check or test directories and files<a class=headerlink href=#check-or-test-directories-and-files title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>test_dir</span><span class=p>(</span><span class=n>directory</span><span class=p>):</span>
    <span class=kn>from</span> <span class=nn>os.path</span> <span class=kn>import</span> <span class=n>exists</span>
    <span class=kn>from</span> <span class=nn>os</span> <span class=kn>import</span> <span class=n>makedirs</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>exists</span><span class=p>(</span><span class=n>directory</span><span class=p>):</span>
        <span class=n>makedirs</span><span class=p>(</span><span class=n>directory</span><span class=p>)</span>


<span class=k>def</span> <span class=nf>test_file</span><span class=p>(</span><span class=n>filepath</span><span class=p>,</span> <span class=n>mode</span><span class=p>):</span>
    <span class=sd>&#39;&#39;&#39; Check if a file exist and is accessible. &#39;&#39;&#39;</span>

    <span class=k>def</span> <span class=nf>check_mode</span><span class=p>(</span><span class=n>os_mode</span><span class=p>,</span> <span class=n>mode</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isfile</span><span class=p>(</span><span class=n>filepath</span><span class=p>)</span> <span class=ow>and</span> <span class=n>os</span><span class=o>.</span><span class=n>access</span><span class=p>(</span><span class=n>filepath</span><span class=p>,</span> <span class=n>os_mode</span><span class=p>):</span>
            <span class=k>return</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>IOError</span><span class=p>(</span><span class=s2>&quot;Can&#39;t access the file with mode &quot;</span> <span class=o>+</span> <span class=n>mode</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>mode</span> <span class=ow>is</span> <span class=s1>&#39;r&#39;</span><span class=p>:</span>
        <span class=n>check_mode</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>R_OK</span><span class=p>,</span> <span class=n>mode</span><span class=p>)</span>
    <span class=k>elif</span> <span class=n>mode</span> <span class=ow>is</span> <span class=s1>&#39;w&#39;</span><span class=p>:</span>
        <span class=n>check_mode</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>W_OK</span><span class=p>,</span> <span class=n>mode</span><span class=p>)</span>
    <span class=k>elif</span> <span class=n>mode</span> <span class=ow>is</span> <span class=s1>&#39;a&#39;</span><span class=p>:</span>
        <span class=n>check_mode</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>R_OK</span><span class=p>,</span> <span class=n>mode</span><span class=p>)</span>
        <span class=n>check_mode</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>W_OK</span><span class=p>,</span> <span class=n>mode</span><span class=p>)</span>
</code></pre></div> <h2 id=remove-the-extension-of-a-file><a href=https://stackoverflow.com/questions/678236/how-to-get-the-filename-without-the-extension-from-a-path-in-python>Remove the extension of a file</a><a class=headerlink href=#remove-the-extension-of-a-file title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=s2>&quot;/path/to/some/file.txt&quot;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</code></pre></div> <h2 id=iterate-over-the-files-of-a-directory><a href=https://www.newbedev.com/python/howto/how-to-iterate-over-files-in-a-given-directory/#2-using-os-scandir>Iterate over the files of a directory</a><a class=headerlink href=#iterate-over-the-files-of-a-directory title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>os</span>

<span class=n>directory</span> <span class=o>=</span> <span class=s1>&#39;/path/to/directory&#39;</span>
<span class=k>for</span> <span class=n>entry</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>scandir</span><span class=p>(</span><span class=n>directory</span><span class=p>):</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>entry</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s2>&quot;.jpg&quot;</span><span class=p>)</span>
            <span class=ow>or</span> <span class=n>entry</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s2>&quot;.png&quot;</span><span class=p>))</span> <span class=ow>and</span> <span class=n>entry</span><span class=o>.</span><span class=n>is_file</span><span class=p>():</span>
        <span class=nb>print</span><span class=p>(</span><span class=n>entry</span><span class=o>.</span><span class=n>path</span><span class=p>)</span>
</code></pre></div> <h4 id=create-directory>Create directory<a class=headerlink href=#create-directory title="Permanent link">⚑</a></h4> <div class=highlight><pre><span></span><code><span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>directory</span><span class=p>):</span>
    <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>directory</span><span class=p>)</span>
</code></pre></div> <h4 id=touch-a-file><a href=https://stackoverflow.com/questions/1158076/implement-touch-using-python>Touch a file</a><a class=headerlink href=#touch-a-file title="Permanent link">⚑</a></h4> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>

<span class=n>Path</span><span class=p>(</span><span class=s1>&#39;path/to/file.txt&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>touch</span><span class=p>()</span>
</code></pre></div> <h2 id=get-the-first-day-of-next-month><a href=https://stackoverflow.com/questions/4130922/how-to-increment-datetime-by-custom-months-in-python-without-using-library>Get the first day of next month</a><a class=headerlink href=#get-the-first-day-of-next-month title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=n>current</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=p>(</span><span class=n>mydate</span><span class=o>.</span><span class=n>year</span><span class=p>,</span> <span class=n>mydate</span><span class=o>.</span><span class=n>month</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=n>next_month</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=p>(</span><span class=n>mydate</span><span class=o>.</span><span class=n>year</span> <span class=o>+</span> <span class=nb>int</span><span class=p>(</span><span class=n>mydate</span><span class=o>.</span><span class=n>month</span> <span class=o>/</span> <span class=mi>12</span><span class=p>),</span> <span class=p>((</span><span class=n>mydate</span><span class=o>.</span><span class=n>month</span> <span class=o>%</span> <span class=mi>12</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>),</span> <span class=mi>1</span><span class=p>)</span>
</code></pre></div> <h2 id=get-the-week-number-of-a-datetime><a href=https://stackoverflow.com/questions/2600775/how-to-get-week-number-in-python>Get the week number of a datetime</a><a class=headerlink href=#get-the-week-number-of-a-datetime title="Permanent link">⚑</a></h2> <p><code>datetime.datetime</code> has a <code>isocalendar()</code> method, which returns a tuple containing the calendar week:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>datetime</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=p>(</span><span class=mi>2010</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>16</span><span class=p>)</span><span class=o>.</span><span class=n>isocalendar</span><span class=p>()[</span><span class=mi>1</span><span class=p>]</span>
<span class=mi>24</span>
</code></pre></div> <p><code>datetime.date.isocalendar()</code> is an instance-method returning a tuple containing year, weeknumber and weekday in respective order for the given date instance.</p> <h2 id=get-the-monday-of-a-week-number><a href=https://stackoverflow.com/questions/17087314/get-date-from-week-number>Get the monday of a week number</a><a class=headerlink href=#get-the-monday-of-a-week-number title="Permanent link">⚑</a></h2> <p>A week number is not enough to generate a date; you need a day of the week as well. Add a default:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>datetime</span>
<span class=n>d</span> <span class=o>=</span> <span class=s2>&quot;2013-W26&quot;</span>
<span class=n>r</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=o>.</span><span class=n>strptime</span><span class=p>(</span><span class=n>d</span> <span class=o>+</span> <span class=s1>&#39;-1&#39;</span><span class=p>,</span> <span class=s2>&quot;%Y-W%W-%w&quot;</span><span class=p>)</span>
</code></pre></div> <p>The <code>-1</code> and <code>-%w</code> pattern tells the parser to pick the Monday in that week.</p> <h2 id=get-the-month-name-from-a-number><a href=https://stackoverflow.com/questions/6557553/get-month-name-from-number>Get the month name from a number</a><a class=headerlink href=#get-the-month-name-from-a-number title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>calendar</span>

<span class=o>&gt;&gt;</span> <span class=n>calendar</span><span class=o>.</span><span class=n>month_name</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span>
<span class=s1>&#39;March&#39;</span>
</code></pre></div> <h2 id=get-ordinal-from-number><a href=https://stackoverflow.com/questions/9647202/ordinal-numbers-replacement>Get ordinal from number</a><a class=headerlink href=#get-ordinal-from-number title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>int_to_ordinal</span><span class=p>(</span><span class=n>number</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
    <span class=sd>&#39;&#39;&#39;Convert an integer into its ordinal representation.</span>

<span class=sd>    make_ordinal(0)   =&gt; &#39;0th&#39;</span>
<span class=sd>    make_ordinal(3)   =&gt; &#39;3rd&#39;</span>
<span class=sd>    make_ordinal(122) =&gt; &#39;122nd&#39;</span>
<span class=sd>    make_ordinal(213) =&gt; &#39;213th&#39;</span>

<span class=sd>    Args:</span>
<span class=sd>        number: Number to convert</span>

<span class=sd>    Returns:</span>
<span class=sd>        ordinal representation of the number</span>
<span class=sd>    &#39;&#39;&#39;</span>
    <span class=n>suffix</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;th&#39;</span><span class=p>,</span> <span class=s1>&#39;st&#39;</span><span class=p>,</span> <span class=s1>&#39;nd&#39;</span><span class=p>,</span> <span class=s1>&#39;rd&#39;</span><span class=p>,</span> <span class=s1>&#39;th&#39;</span><span class=p>][</span><span class=nb>min</span><span class=p>(</span><span class=n>number</span> <span class=o>%</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>4</span><span class=p>)]</span>
    <span class=k>if</span> <span class=mi>11</span> <span class=o>&lt;=</span> <span class=p>(</span><span class=n>number</span> <span class=o>%</span> <span class=mi>100</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=mi>13</span><span class=p>:</span>
        <span class=n>suffix</span> <span class=o>=</span> <span class=s1>&#39;th&#39;</span>
    <span class=k>return</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>number</span><span class=si>}{</span><span class=n>suffix</span><span class=si>}</span><span class=s2>&quot;</span>
</code></pre></div> <h2 id=group-or-sort-a-list-of-dictionaries-or-objects-by-a-specific-key><a href=https://docs.python.org/3/howto/sorting.html>Group or sort a list of dictionaries or objects by a specific key</a><a class=headerlink href=#group-or-sort-a-list-of-dictionaries-or-objects-by-a-specific-key title="Permanent link">⚑</a></h2> <p>Python lists have a built-in <code>list.sort()</code> method that modifies the list in-place. There is also a <code>sorted()</code> built-in function that builds a new sorted list from an iterable.</p> <h3 id=sorting-basics><a href=https://docs.python.org/3/howto/sorting.html#sorting-basics>Sorting basics</a><a class=headerlink href=#sorting-basics title="Permanent link">⚑</a></h3> <p>A simple ascending sort is very easy: just call the <code>sorted()</code> function. It returns a new sorted list:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=nb>sorted</span><span class=p>([</span><span class=mi>5</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span>
<span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>]</span>
</code></pre></div> <h3 id=key-functions><a href=https://docs.python.org/3/howto/sorting.html#key-functions>Key functions</a><a class=headerlink href=#key-functions title="Permanent link">⚑</a></h3> <p>Both <code>list.sort()</code> and <code>sorted()</code> have a <code>key</code> parameter to specify a function (or other callable) to be called on each list element prior to making comparisons.</p> <p>For example, here’s a case-insensitive string comparison:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=nb>sorted</span><span class=p>(</span><span class=s2>&quot;This is a test string from Andrew&quot;</span><span class=o>.</span><span class=n>split</span><span class=p>(),</span> <span class=n>key</span><span class=o>=</span><span class=nb>str</span><span class=o>.</span><span class=n>lower</span><span class=p>)</span>
<span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;Andrew&#39;</span><span class=p>,</span> <span class=s1>&#39;from&#39;</span><span class=p>,</span> <span class=s1>&#39;is&#39;</span><span class=p>,</span> <span class=s1>&#39;string&#39;</span><span class=p>,</span> <span class=s1>&#39;test&#39;</span><span class=p>,</span> <span class=s1>&#39;This&#39;</span><span class=p>]</span>
</code></pre></div> <p>The value of the <code>key</code> parameter should be a function (or other callable) that takes a single argument and returns a key to use for sorting purposes. This technique is fast because the key function is called exactly once for each input record.</p> <p>A common pattern is to sort complex objects using some of the object’s indices as keys. For example:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span> <span class=nn>operator</span> <span class=kn>import</span> <span class=n>itemgetter</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>student_tuples</span> <span class=o>=</span> <span class=p>[</span>
    <span class=p>(</span><span class=s1>&#39;john&#39;</span><span class=p>,</span> <span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=mi>15</span><span class=p>),</span>
    <span class=p>(</span><span class=s1>&#39;jane&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>12</span><span class=p>),</span>
    <span class=p>(</span><span class=s1>&#39;dave&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span>
<span class=p>]</span>

<span class=o>&gt;&gt;&gt;</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>student_tuples</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=n>itemgetter</span><span class=p>(</span><span class=mi>2</span><span class=p>))</span>   <span class=c1># sort by age</span>
<span class=p>[(</span><span class=s1>&#39;dave&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;jane&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>12</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;john&#39;</span><span class=p>,</span> <span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=mi>15</span><span class=p>)]</span>
</code></pre></div> <p>The same technique works for objects with named attributes. For example:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span> <span class=nn>operator</span> <span class=kn>import</span> <span class=n>attrgetter</span>
<span class=o>&gt;&gt;&gt;</span> <span class=k>class</span> <span class=nc>Student</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>grade</span><span class=p>,</span> <span class=n>age</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>grade</span> <span class=o>=</span> <span class=n>grade</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>age</span> <span class=o>=</span> <span class=n>age</span>

    <span class=k>def</span> <span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=nb>repr</span><span class=p>((</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>grade</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>age</span><span class=p>))</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>student_objects</span> <span class=o>=</span> <span class=p>[</span>
    <span class=n>Student</span><span class=p>(</span><span class=s1>&#39;john&#39;</span><span class=p>,</span> <span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=mi>15</span><span class=p>),</span>
    <span class=n>Student</span><span class=p>(</span><span class=s1>&#39;jane&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>12</span><span class=p>),</span>
    <span class=n>Student</span><span class=p>(</span><span class=s1>&#39;dave&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span>
<span class=p>]</span>

<span class=o>&gt;&gt;&gt;</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>student_objects</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=n>attrgetter</span><span class=p>(</span><span class=s1>&#39;age&#39;</span><span class=p>))</span>   <span class=c1># sort by age</span>
<span class=p>[(</span><span class=s1>&#39;dave&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;jane&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>12</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;john&#39;</span><span class=p>,</span> <span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=mi>15</span><span class=p>)]</span>
</code></pre></div> <p>The operator module functions allow multiple levels of sorting. For example, to sort by grade then by age:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>student_tuples</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=n>itemgetter</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>))</span>
<span class=p>[(</span><span class=s1>&#39;john&#39;</span><span class=p>,</span> <span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=mi>15</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;dave&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;jane&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>12</span><span class=p>)]</span>

<span class=o>&gt;&gt;&gt;</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>student_objects</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=n>attrgetter</span><span class=p>(</span><span class=s1>&#39;grade&#39;</span><span class=p>,</span> <span class=s1>&#39;age&#39;</span><span class=p>))</span>
<span class=p>[(</span><span class=s1>&#39;john&#39;</span><span class=p>,</span> <span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=mi>15</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;dave&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;jane&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>12</span><span class=p>)]</span>
</code></pre></div> <h3 id=sorts-stability-and-complex-sorts><a href=https://docs.python.org/3/howto/sorting.html#sort-stability-and-complex-sorts>Sorts stability and complex sorts</a><a class=headerlink href=#sorts-stability-and-complex-sorts title="Permanent link">⚑</a></h3> <p>Sorts are guaranteed to be stable. That means that when multiple records have the same key, their original order is preserved.</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>data</span> <span class=o>=</span> <span class=p>[(</span><span class=s1>&#39;red&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;blue&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;red&#39;</span><span class=p>,</span> <span class=mi>2</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;blue&#39;</span><span class=p>,</span> <span class=mi>2</span><span class=p>)]</span>

<span class=o>&gt;&gt;&gt;</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=n>itemgetter</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span>
<span class=p>[(</span><span class=s1>&#39;blue&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;blue&#39;</span><span class=p>,</span> <span class=mi>2</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;red&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;red&#39;</span><span class=p>,</span> <span class=mi>2</span><span class=p>)]</span>
</code></pre></div> <p>Notice how the two records for blue retain their original order so that <code>('blue', 1)</code> is guaranteed to precede <code>('blue', 2)</code>.</p> <p>This wonderful property lets you build complex sorts in a series of sorting steps. For example, to sort the student data by descending grade and then ascending age, do the age sort first and then sort again using grade:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>s</span> <span class=o>=</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>student_objects</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=n>attrgetter</span><span class=p>(</span><span class=s1>&#39;age&#39;</span><span class=p>))</span>     <span class=c1># sort on secondary key</span>

<span class=o>&gt;&gt;&gt;</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>s</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=n>attrgetter</span><span class=p>(</span><span class=s1>&#39;grade&#39;</span><span class=p>),</span> <span class=n>reverse</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>       <span class=c1># now sort on primary key, descending</span>
<span class=p>[(</span><span class=s1>&#39;dave&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;jane&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>12</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;john&#39;</span><span class=p>,</span> <span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=mi>15</span><span class=p>)]</span>
</code></pre></div> <p>This can be abstracted out into a wrapper function that can take a list and tuples of field and order to sort them on multiple passes.</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=k>def</span> <span class=nf>multisort</span><span class=p>(</span><span class=n>xs</span><span class=p>,</span> <span class=n>specs</span><span class=p>):</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>reverse</span> <span class=ow>in</span> <span class=nb>reversed</span><span class=p>(</span><span class=n>specs</span><span class=p>):</span>
        <span class=n>xs</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=n>key</span><span class=o>=</span><span class=n>attrgetter</span><span class=p>(</span><span class=n>key</span><span class=p>),</span> <span class=n>reverse</span><span class=o>=</span><span class=n>reverse</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>xs</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>multisort</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>student_objects</span><span class=p>),</span> <span class=p>((</span><span class=s1>&#39;grade&#39;</span><span class=p>,</span> <span class=kc>True</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;age&#39;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)))</span>
<span class=p>[(</span><span class=s1>&#39;dave&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;jane&#39;</span><span class=p>,</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=mi>12</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;john&#39;</span><span class=p>,</span> <span class=s1>&#39;A&#39;</span><span class=p>,</span> <span class=mi>15</span><span class=p>)]</span>
</code></pre></div> <h2 id=iterate-over-an-instance-objects-data-attributes-in-python><a href=https://www.saltycrane.com/blog/2008/09/how-iterate-over-instance-objects-data-attributes-python/ >Iterate over an instance object's data attributes in Python</a><a class=headerlink href=#iterate-over-an-instance-objects-data-attributes-in-python title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=nd>@dataclass</span><span class=p>(</span><span class=n>frozen</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=k>class</span> <span class=nc>Search</span><span class=p>:</span>
    <span class=n>center</span><span class=p>:</span> <span class=nb>str</span>
    <span class=n>distance</span><span class=p>:</span> <span class=nb>str</span>

<span class=n>se</span> <span class=o>=</span> <span class=n>Search</span><span class=p>(</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>)</span>
<span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>se</span><span class=o>.</span><span class=vm>__dict__</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
   <span class=nb>print</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</code></pre></div> <h2 id=generate-ssh-key><a href=https://stackoverflow.com/questions/2466401/how-to-generate-ssh-key-pairs-with-python>Generate ssh key</a><a class=headerlink href=#generate-ssh-key title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code>pip install cryptography
</code></pre></div> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>os</span> <span class=kn>import</span> <span class=n>chmod</span>
<span class=kn>from</span> <span class=nn>cryptography.hazmat.primitives</span> <span class=kn>import</span> <span class=n>serialization</span>
<span class=kn>from</span> <span class=nn>cryptography.hazmat.primitives.asymmetric</span> <span class=kn>import</span> <span class=n>rsa</span>
<span class=kn>from</span> <span class=nn>cryptography.hazmat.backends</span> <span class=kn>import</span> <span class=n>default_backend</span> <span class=k>as</span> <span class=n>crypto_default_backend</span>

<span class=n>private_key</span> <span class=o>=</span> <span class=n>rsa</span><span class=o>.</span><span class=n>generate_private_key</span><span class=p>(</span>
    <span class=n>backend</span><span class=o>=</span><span class=n>crypto_default_backend</span><span class=p>(),</span>
    <span class=n>public_exponent</span><span class=o>=</span><span class=mi>65537</span><span class=p>,</span>
    <span class=n>key_size</span><span class=o>=</span><span class=mi>4096</span>
<span class=p>)</span>
<span class=n>pem</span> <span class=o>=</span> <span class=n>private_key</span><span class=o>.</span><span class=n>private_bytes</span><span class=p>(</span>
    <span class=n>encoding</span><span class=o>=</span><span class=n>serialization</span><span class=o>.</span><span class=n>Encoding</span><span class=o>.</span><span class=n>PEM</span><span class=p>,</span>
    <span class=nb>format</span><span class=o>=</span><span class=n>serialization</span><span class=o>.</span><span class=n>PrivateFormat</span><span class=o>.</span><span class=n>TraditionalOpenSSL</span><span class=p>,</span>
    <span class=n>encryption_algorithm</span><span class=o>=</span><span class=n>serialization</span><span class=o>.</span><span class=n>NoEncryption</span><span class=p>()</span>
<span class=p>)</span>

<span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&quot;/tmp/private.key&quot;</span><span class=p>,</span> <span class=s1>&#39;wb&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>content_file</span><span class=p>:</span>
    <span class=n>chmod</span><span class=p>(</span><span class=s2>&quot;/tmp/private.key&quot;</span><span class=p>,</span> <span class=mi>0600</span><span class=p>)</span>
    <span class=n>content_file</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>pem</span><span class=p>)</span>

<span class=n>public_key</span> <span class=o>=</span> <span class=p>(</span>
    <span class=n>private_key</span><span class=o>.</span><span class=n>public_key</span><span class=p>()</span><span class=o>.</span><span class=n>public_bytes</span><span class=p>(</span>
        <span class=n>encoding</span><span class=o>=</span><span class=n>serialization</span><span class=o>.</span><span class=n>Encoding</span><span class=o>.</span><span class=n>OpenSSH</span><span class=p>,</span>
        <span class=nb>format</span><span class=o>=</span><span class=n>serialization</span><span class=o>.</span><span class=n>PublicFormat</span><span class=o>.</span><span class=n>OpenSSH</span><span class=p>,</span>
    <span class=p>)</span>
    <span class=o>+</span> <span class=sa>b</span><span class=s1>&#39; user@email.org&#39;</span>
<span class=p>)</span>
<span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&quot;/tmp/public.key&quot;</span><span class=p>,</span> <span class=s1>&#39;wb&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>content_file</span><span class=p>:</span>
    <span class=n>content_file</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>public_key</span><span class=p>)</span>
</code></pre></div> <h2 id=make-multiline-code-look-clean>Make multiline code look clean<a class=headerlink href=#make-multiline-code-look-clean title="Permanent link">⚑</a></h2> <p>If you need variables that contain multiline strings inside functions or methods you need to remove the indentation</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>test</span><span class=p>():</span>
    <span class=c1># end first line with \ to avoid the empty line!</span>
    <span class=n>s</span> <span class=o>=</span> <span class=s1>&#39;&#39;&#39;</span><span class=se>\</span>
<span class=s1>hello</span>
<span class=s1>  world</span>
<span class=s1>&#39;&#39;&#39;</span>
</code></pre></div> <p>Which is inconvenient as it breaks some editor source code folding and it's ugly for the eye.</p> <p>The solution is to use <a href=https://docs.python.org/3/library/textwrap.html><code>textwrap.dedent()</code></a></p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>textwrap</span>

<span class=k>def</span> <span class=nf>test</span><span class=p>():</span>
    <span class=c1># end first line with \ to avoid the empty line!</span>
    <span class=n>s</span> <span class=o>=</span> <span class=s1>&#39;&#39;&#39;</span><span class=se>\</span>
<span class=s1>    hello</span>
<span class=s1>      world</span>
<span class=s1>    &#39;&#39;&#39;</span>
    <span class=nb>print</span><span class=p>(</span><span class=nb>repr</span><span class=p>(</span><span class=n>s</span><span class=p>))</span>          <span class=c1># prints &#39;    hello\n      world\n    &#39;</span>
    <span class=nb>print</span><span class=p>(</span><span class=nb>repr</span><span class=p>(</span><span class=n>textwrap</span><span class=o>.</span><span class=n>dedent</span><span class=p>(</span><span class=n>s</span><span class=p>)))</span>  <span class=c1># prints &#39;hello\n  world\n&#39;</span>
</code></pre></div> <p>If you forget to add the trailing <code>\</code> character of <code>s = '''\</code> or use <code>s = '''hello</code>, you're going to have a bad time with <a href=../../../devops/black/ >black</a>.</p> <h2 id=play-a-sound><a href=https://linuxhint.com/play_sound_python/ >Play a sound</a><a class=headerlink href=#play-a-sound title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code>pip install playsound
</code></pre></div> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>playsound</span> <span class=kn>import</span> <span class=n>playsound</span>
<span class=n>playsound</span><span class=p>(</span><span class=s1>&#39;path/to/file.wav&#39;</span><span class=p>)</span>
</code></pre></div> <h2 id=deep-copy-a-dictionary><a href=https://stackoverflow.com/questions/5105517/deep-copy-of-a-dict-in-python>Deep copy a dictionary</a><a class=headerlink href=#deep-copy-a-dictionary title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>copy</span>
<span class=n>d</span> <span class=o>=</span> <span class=p>{</span> <span class=o>...</span> <span class=p>}</span>
<span class=n>d2</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>d</span><span class=p>)</span>
</code></pre></div> <h2 id=find-the-root-directory-of-a-package><a href=https://github.com/chendaniely/pyprojroot>Find the root directory of a package</a><a class=headerlink href=#find-the-root-directory-of-a-package title="Permanent link">⚑</a></h2> <p><code>pyprojroot</code> finds the root working directory for your project as a <code>pathlib</code> object. You can now use the here function to pass in a relative path from the project root directory (no matter what working directory you are in the project), and you will get a full path to the specified file.</p> <h3 id=installation>Installation<a class=headerlink href=#installation title="Permanent link">⚑</a></h3> <div class=highlight><pre><span></span><code>pip install pyprojroot
</code></pre></div> <h3 id=usage>Usage<a class=headerlink href=#usage title="Permanent link">⚑</a></h3> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>pyprojroot</span> <span class=kn>import</span> <span class=n>here</span>

<span class=n>here</span><span class=p>()</span>
</code></pre></div> <h2 id=check-if-an-object-has-an-attribute><a href=https://stackoverflow.com/questions/610883/how-to-know-if-an-object-has-an-attribute-in-python>Check if an object has an attribute</a><a class=headerlink href=#check-if-an-object-has-an-attribute title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=s1>&#39;property&#39;</span><span class=p>):</span>
    <span class=n>a</span><span class=o>.</span><span class=n>property</span>
</code></pre></div> <h2 id=check-if-a-loop-ends-completely><a href=https://stackoverflow.com/questions/38381850/how-to-check-whether-for-loop-ends-completely-in-python/38381893>Check if a loop ends completely</a><a class=headerlink href=#check-if-a-loop-ends-completely title="Permanent link">⚑</a></h2> <p><code>for</code> loops can take an <code>else</code> block which is not run if the loop has ended with a <code>break</code> statement.</p> <div class=highlight><pre><span></span><code><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>]:</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>i</span><span class=o>==</span><span class=mi>3</span><span class=p>:</span>
        <span class=k>break</span>
<span class=k>else</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;for loop was not broken&quot;</span><span class=p>)</span>
</code></pre></div> <h3 id=merge-two-lists><a href=https://stackoverflow.com/questions/1720421/how-do-i-concatenate-two-lists-in-python>Merge two lists</a><a class=headerlink href=#merge-two-lists title="Permanent link">⚑</a></h3> <div class=highlight><pre><span></span><code><span class=n>z</span> <span class=o>=</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span>
</code></pre></div> <h3 id=merge-two-dictionaries><a href=https://stackoverflow.com/questions/38987/how-to-merge-two-dictionaries-in-a-single-expression>Merge two dictionaries</a><a class=headerlink href=#merge-two-dictionaries title="Permanent link">⚑</a></h3> <div class=highlight><pre><span></span><code><span class=n>z</span> <span class=o>=</span> <span class=p>{</span><span class=o>**</span><span class=n>x</span><span class=p>,</span> <span class=o>**</span><span class=n>y</span><span class=p>}</span>
</code></pre></div> <h3 id=create-user-defined-exceptions><a href=https://docs.python.org/3/tutorial/errors.html#user-defined-exceptions>Create user defined exceptions</a><a class=headerlink href=#create-user-defined-exceptions title="Permanent link">⚑</a></h3> <p>Programs may name their own exceptions by creating a new exception class. Exceptions should typically be derived from the <code>Exception</code> class, either directly or indirectly.</p> <p>Exception classes are meant to be kept simple, only offering a number of attributes that allow information about the error to be extracted by handlers for the exception. When creating a module that can raise several distinct errors, a common practice is to create a base class for exceptions defined by that module, and subclass that to create specific exception classes for different error conditions:</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Error</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;Base class for exceptions in this module.&quot;&quot;&quot;</span>


<span class=k>class</span> <span class=nc>ConceptNotFoundError</span><span class=p>(</span><span class=n>Error</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;Transactions with unmatched concept.&quot;&quot;&quot;</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>message</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>transactions</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Transaction</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=sd>&quot;&quot;&quot;Initialize the exception.&quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>message</span> <span class=o>=</span> <span class=n>message</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>transactions</span> <span class=o>=</span> <span class=n>transactions</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>message</span><span class=p>)</span>
</code></pre></div> <p>Most exceptions are defined with names that end in “Error”, similar to the naming of the standard exceptions.</p> <h3 id=import-a-module-or-its-objects-from-within-a-python-program><a href=https://docs.python.org/3/library/importlib.html>Import a module or it's objects from within a python program</a><a class=headerlink href=#import-a-module-or-its-objects-from-within-a-python-program title="Permanent link">⚑</a></h3> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>importlib</span>

<span class=n>module</span> <span class=o>=</span> <span class=n>importlib</span><span class=o>.</span><span class=n>import_module</span><span class=p>(</span><span class=s1>&#39;os&#39;</span><span class=p>)</span>
<span class=n>module_class</span> <span class=o>=</span> <span class=n>module</span><span class=o>.</span><span class=n>getcwd</span>

<span class=n>relative_module</span> <span class=o>=</span> <span class=n>importlib</span><span class=o>.</span><span class=n>import_module</span><span class=p>(</span><span class=s1>&#39;.model&#39;</span><span class=p>,</span> <span class=n>package</span><span class=o>=</span><span class=s1>&#39;mypackage&#39;</span><span class=p>)</span>
<span class=n>class_to_extract</span> <span class=o>=</span> <span class=s1>&#39;MyModel&#39;</span>
<span class=n>extracted_class</span> <span class=o>=</span> <span class=n>geattr</span><span class=p>(</span><span class=n>relative_module</span><span class=p>,</span> <span class=n>class_to_extract</span><span class=p>)</span>
</code></pre></div> <p>The first argument specifies what module to import in absolute or relative terms (e.g. either <code>pkg.mod</code> or <code>..mod</code>). If the name is specified in relative terms, then the package argument must be set to the name of the package which is to act as the anchor for resolving the package name (e.g. <code>import_module('..mod', 'pkg.subpkg')</code> will <code>import pkg.mod</code>).</p> <h2 id=get-systems-timezone-and-use-it-in-datetime><a href=https://stackoverflow.com/a/61124241>Get system's timezone and use it in datetime</a><a class=headerlink href=#get-systems-timezone-and-use-it-in-datetime title="Permanent link">⚑</a></h2> <p>To obtain timezone information in the form of a <code>datetime.tzinfo</code> object, use <code>dateutil.tz.tzlocal()</code>:</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>dateutil</span> <span class=kn>import</span> <span class=n>tz</span>
<span class=n>myTimeZone</span> <span class=o>=</span> <span class=n>tz</span><span class=o>.</span><span class=n>tzlocal</span><span class=p>()</span>
</code></pre></div> <p>This object can be used in the <code>tz</code> parameter of <code>datetime.datetime.now()</code>:</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
<span class=kn>from</span> <span class=nn>dateutil</span> <span class=kn>import</span> <span class=n>tz</span>
<span class=n>localisedDatetime</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>(</span><span class=n>tz</span> <span class=o>=</span> <span class=n>tz</span><span class=o>.</span><span class=n>tzlocal</span><span class=p>())</span>
</code></pre></div> <h2 id=capitalize-a-sentence><a href=https://stackoverflow.com/questions/53898070/capitalize-only-the-first-letter-of-sentences-in-python-using-split-function>Capitalize a sentence</a><a class=headerlink href=#capitalize-a-sentence title="Permanent link">⚑</a></h2> <p>To change the caps of the first letter of the first word of a sentence use:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;</span> <span class=n>sentence</span> <span class=o>=</span> <span class=s2>&quot;add funny Emojis&quot;</span>
<span class=o>&gt;&gt;</span> <span class=n>sentence</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span> <span class=o>+</span> <span class=n>sentence</span><span class=p>[</span><span class=mi>1</span><span class=p>:]</span>
<span class=n>Add</span> <span class=n>funny</span> <span class=n>Emojis</span>
</code></pre></div> <p>The <code>.capitalize</code> method transforms the rest of words to lowercase. The <code>.title</code> transforms all sentence words to capitalize.</p> <h2 id=get-the-last-monday-datetime><a href=https://www.pythonprogramming.in/find-the-previous-and-coming-monday-s-date-based-on-current-date.html>Get the last monday datetime</a><a class=headerlink href=#get-the-last-monday-datetime title="Permanent link">⚑</a></h2> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>datetime</span>

<span class=n>today</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>today</span><span class=p>()</span>
<span class=n>last_monday</span> <span class=o>=</span> <span class=n>today</span> <span class=o>-</span> <span class=n>datetime</span><span class=o>.</span><span class=n>timedelta</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=n>today</span><span class=o>.</span><span class=n>weekday</span><span class=p>())</span>
</code></pre></div> <h2 id=issues>Issues<a class=headerlink href=#issues title="Permanent link">⚑</a></h2> <ul> <li><a href=https://github.com/BaderLab/saber/issues/35>Pypi won't allow you to upload packages with direct dependencies</a>: update the section above.</li> </ul> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2021-12-17T13:16:53+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2021-12-17</span> </small> </div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../pytest_cases/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Pytest-cases" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Pytest-cases </div> </div> </a> <a href=../../json/json/ class="md-footer__link md-footer__link--next" aria-label="Next: JSON" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> JSON </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/lyz-code target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://lyz-code.github.io/blue-book/newsletter/0_newsletter_index target=_blank rel=noopener title=lyz-code.github.io class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.instant", "navigation.top", "content.code.annotate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.0bbba5b5.min.js"}</script> <script src=../../../assets/javascripts/bundle.e1a181d9.min.js></script> <script src=../../../js/timeago.min.js></script> <script src=../../../js/timeago_mkdocs_material.js></script> </body> </html>